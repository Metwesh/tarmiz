import{b as ce,c as v,d as pe,e as ue,f as _e,g as fe,i as Ce,j as xe,n as Se,o as be}from"./chunk-RWLWIXKE.js";import{$ as Z,D as J,E as K,F as Q,G as W,H as A,I as T,K as y,X as Y,a as I,ba as ee,ca as M,da as k,k as H,ka as te,la as ne,m as q,ma as ie,n as z,na as oe,oa as ae,pa as re,qa as le,ra as se,x as U,y as E,ya as me,z as X,za as de}from"./chunk-DLRE2GSZ.js";import{Fb as _,Jb as F,Lb as c,Mb as L,Nb as b,Ob as h,Pb as i,Qb as t,Rb as s,Vb as $,Yb as S,Yc as G,_b as p,a as B,cb as l,hb as x,kc as o,lc as f,mc as u,na as N,oa as V,pa as R,pb as g,pc as P,qc as w,sc as j,uc as O,vb as d,xa as D}from"./chunk-SNB637Z6.js";var he=e=>({"is-invalid":e});function Te(e,r){e&1&&(i(0,"div",10),o(1,"Bid price is required"),t())}function ye(e,r){e&1&&(i(0,"div",10),o(1,"Ask price is required"),t())}function Me(e,r){e&1&&(s(0,"c-spinner",14),o(1," Loading... "))}function ke(e,r){e&1&&o(0," Discard Changes")}function De(e,r){e&1&&(s(0,"c-spinner",14),o(1," Loading... "))}function Fe(e,r){e&1&&o(0," Save Changes ")}var ve=(()=>{class e{constructor(n,m){this.formBuilder=n,this.http=m,this.close=new D,this.revalidate=new D,this.submitting=!1,this.priceSetForm=this.formBuilder.group({bid:[0,[v.required,v.min(0)]],ask:[0,[v.required,v.min(0)]]})}onSubmit(){if(this.priceSetForm.invalid)return;this.submitting=!0;let n=B({assetId:this.formData?.assetId??0,marketId:this.formData?.marketId??0},this.priceSetForm.value);this.http.post("/assets/price/set",n).subscribe({next:()=>{this.submitting=!1,this.closeModal(),this.revalidateAssetInner()},error:()=>{this.submitting=!1}})}onReset(){this.submitting=!1,this.priceSetForm.reset(),this.closeModal()}onVisibleChange(n){this.priceSetForm.setValue({bid:this.formData?.bid??0,ask:this.formData?.ask??0}),!n&&this.closeModal()}closeModal(){this.close.emit()}revalidateAssetInner(){this.revalidate.emit()}static{this.\u0275fac=function(m){return new(m||e)(x(Se),x(I))}}static{this.\u0275cmp=g({type:e,selectors:[["app-price-set-modal"]],inputs:{visible:"visible",formData:"formData"},outputs:{close:"close",revalidate:"revalidate"},decls:39,vars:18,consts:[["alignment","center",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"mb-3"],[1,"fw-bold"],[1,"m-0"],["id","price-set-form",3,"ngSubmit","reset","formGroup"],["xs","12","md","6"],["cLabel","",1,"form-label"],["type","number","formControlName","bid","cFormControl","",1,"form-control"],[1,"text-danger"],["type","number","formControlName","ask","cFormControl","",1,"form-control"],["cButton","","form","price-set-form","type","reset","color","secondary",3,"disabled"],["cButton","","form","price-set-form","type","submit","color","primary",3,"disabled"],["size","sm"]],template:function(m,a){m&1&&(i(0,"c-modal",0),S("visibleChange",function(Ie){return a.onVisibleChange(Ie)}),i(1,"c-modal-header")(2,"h5",1),o(3,"Set Price"),t(),i(4,"button",2),S("click",function(){return a.onReset()}),t()(),i(5,"c-modal-body")(6,"c-card",3)(7,"c-card-header",4),o(8,"Market & Asset Details"),t(),i(9,"c-card-body")(10,"p")(11,"strong"),o(12,"Market ID:"),t(),o(13),t(),i(14,"p",5)(15,"strong"),o(16,"Asset ID:"),t(),o(17),t()()(),i(18,"form",6),S("ngSubmit",function(){return a.onSubmit()})("reset",function(){return a.onReset()}),i(19,"c-row")(20,"c-col",7)(21,"div",3)(22,"label",8),o(23,"Bid Price"),t(),s(24,"input",9),d(25,Te,2,0,"div",10),t()(),i(26,"c-col",7)(27,"div",3)(28,"label",8),o(29,"Ask Price"),t(),s(30,"input",11),d(31,ye,2,0,"div",10),t()()()()(),i(32,"c-modal-footer")(33,"button",12),d(34,Me,2,0)(35,ke,1,0),t(),i(36,"button",13),d(37,De,2,0)(38,Fe,1,0),t()()()),m&2&&(_("visible",a.visible),l(13),u(" ",a.formData==null?null:a.formData.marketId,""),l(4),u(" ",a.formData==null?null:a.formData.assetId,""),l(),_("formGroup",a.priceSetForm),l(6),F(w(14,he,a.priceSetForm.controls.bid.invalid&&a.priceSetForm.controls.bid.touched)),l(),c(a.priceSetForm.controls.bid.invalid&&a.priceSetForm.controls.bid.touched?25:-1),l(5),F(w(16,he,a.priceSetForm.controls.ask.invalid&&a.priceSetForm.controls.ask.touched)),l(),c(a.priceSetForm.controls.ask.invalid&&a.priceSetForm.controls.ask.touched?31:-1),l(2),_("disabled",a.submitting),l(),c(a.submitting?34:35),l(2),_("disabled",a.submitting||a.priceSetForm.invalid),l(),c(a.submitting?37:38))},dependencies:[ae,ie,te,ne,oe,E,X,be,_e,ce,fe,pe,ue,Ce,xe,Z,Y,M,k,A,y,T,me],encapsulation:2})}}return e})();var ge=()=>[0,1,2,3,4],Le=(e,r)=>r.update,Pe=(e,r)=>r.subscriber;function we(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Be(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.assetId," ")}}function Ne(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Ve(e,r){if(e&1&&o(0),e&2){let n=p();u(" ID: ",n.asset==null?null:n.asset.assetId," ")}}function Re(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function $e(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.name," ")}}function je(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Oe(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.symbol," ")}}function Ge(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function He(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.assetTypeName," ")}}function qe(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function ze(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.supplyTypeName," ")}}function Ue(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Xe(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.supply," ")}}function Je(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Ke(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.pricingModelName," ")}}function Qe(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function We(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.tradingModelName," ")}}function Ye(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function Ze(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.executionModelName," ")}}function et(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function tt(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.levelName," ")}}function nt(e,r){e&1&&(i(0,"span",5),s(1,"span",15),t())}function it(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.stateName," ")}}function ot(e,r){e&1&&(i(0,"span",5),s(1,"span",16),t())}function at(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",n.asset==null?null:n.asset.contract," ")}}function rt(e,r){e&1&&(i(0,"span",5),s(1,"span",16),t())}function lt(e,r){if(e&1&&(o(0),i(1,"c-badge",17),R(),s(2,"svg",18),t()),e&2){let n=p();u(" ",n.asset!=null&&n.asset.locked?"Locked":"Unlocked"," "),l(),_("color",n.asset!=null&&n.asset.locked?"danger":"success"),l(),_("name",n.asset!=null&&n.asset.locked?"cilX":"cilCheckAlt")}}function st(e,r){e&1&&(i(0,"span",5),s(1,"span",16),t())}function mt(e,r){if(e&1&&o(0),e&2){let n=p();u(" ",(n.asset==null?null:n.asset.extra)||"N/A"," ")}}function dt(e,r){e&1&&(i(0,"tr")(1,"td")(2,"p",19),s(3,"span",20),t()(),i(4,"td")(5,"p",19),s(6,"span",20),t()(),i(7,"td")(8,"p",19),s(9,"span",20),t()(),i(10,"td")(11,"p",19),s(12,"span",20),t()(),i(13,"td")(14,"p",19),s(15,"span",20),t()(),i(16,"td")(17,"p",19),s(18,"span",20),t()()())}function ct(e,r){e&1&&b(0,dt,19,0,"tr",null,L),e&2&&h(P(0,ge))}function pt(e,r){if(e&1){let n=$();i(0,"tr")(1,"td"),o(2),t(),i(3,"td"),o(4),t(),i(5,"td"),o(6),t(),i(7,"td"),o(8),t(),i(9,"td"),o(10),j(11,"date"),t(),i(12,"td")(13,"button",21),S("click",function(){let a=N(n).$implicit,C=p(2);return V(C.togglePriceSetModal(a))}),o(14," Set Price "),t()()()}if(e&2){let n=r.$implicit;l(2),f(n.marketName),l(2),f(n.currencyCode),l(2),f(n.bid),l(2),f(n.ask),l(2),f(O(11,5,n.update,"short"))}}function ut(e,r){if(e&1&&b(0,pt,15,8,"tr",null,Le),e&2){let n=p();h(n.asset==null?null:n.asset.prices)}}function _t(e,r){e&1&&(i(0,"tr")(1,"td")(2,"p",19),s(3,"span",20),t()(),i(4,"td")(5,"p",19),s(6,"span",20),t()(),i(7,"td")(8,"p",19),s(9,"span",20),t()()())}function ft(e,r){e&1&&b(0,_t,10,0,"tr",null,L),e&2&&h(P(0,ge))}function Ct(e,r){if(e&1&&(i(0,"tr")(1,"td"),o(2),t(),i(3,"td"),o(4),t(),i(5,"td"),o(6),t()()),e&2){let n=r.$implicit,m=r.$index;l(2),f(m+1),l(2),f(n.subscriber),l(2),f(n.balance)}}function xt(e,r){if(e&1&&b(0,Ct,7,3,"tr",null,Pe),e&2){let n=p();h(n.subscribers)}}var wt=(()=>{class e{constructor(n,m,a){this.http=n,this.router=m,this.route=a,this.asset=null,this.isAssetLoading=!0,this.subscribers=[],this.isSubscribersLoading=!0,this.isModalOpen=!1}ngOnInit(){this.fetchAssetDetails()}fetchAssetDetails(){this.isAssetLoading=!0,this.isSubscribersLoading=!0;let n=this.route.snapshot.paramMap.get("id");if(!n){this.isAssetLoading=!1,this.router.navigate(["/404"]);return}this.http.get(`/assets/info/${n}`).subscribe({next:m=>{this.asset=m,this.isAssetLoading=!1,this.http.get(`/assets/subscribers/${m.contract}`).subscribe({next:({subscribers:a})=>{this.subscribers=a,this.isSubscribersLoading=!1},error:a=>{console.error("There was an error!",a),this.isSubscribersLoading=!1}})},error:m=>{console.error("There was an error!",m),this.isAssetLoading=!1,this.router.navigate(["/404"])}})}togglePriceSetModal(n){let m=this.route.snapshot.paramMap.get("id");this.formData={assetId:+m,marketId:n.marketId,ask:n.ask,bid:n.bid},this.openModal()}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}refetchAssetDetails(){this.fetchAssetDetails()}static{this.\u0275fac=function(m){return new(m||e)(x(I),x(q),x(H))}}static{this.\u0275cmp=g({type:e,selectors:[["app-asset-inner"]],decls:145,vars:25,consts:[[1,"justify-content-center"],["md","8"],["routerLink","/assets/list","color","primary",2,"cursor","pointer"],["active",""],[1,"d-flex","justify-content-between","align-items-center"],["cPlaceholderAnimation","glow"],["color","secondary"],["md","6"],[1,"text-success"],[1,"mt-4","justify-content-center"],["md","4"],[2,"height","7rem"],[2,"max-height","1.5rem","overflow","auto","margin","0"],["cTable","",3,"hover","responsive","striped"],[3,"close","revalidate","visible","formData"],["cPlaceholder","",2,"width","5rem","border-radius","1rem"],["cPlaceholder","",2,"width","20rem","border-radius","1rem"],["size","sm",3,"color"],["cIcon","",3,"name"],["cPlaceholderAnimation","glow",2,"margin","0"],["cCol","12","cPlaceholder","",2,"border-radius","1rem","width","100%"],["cButton","","color","primary","size","sm",3,"click"]],template:function(m,a){m&1&&(i(0,"c-container")(1,"c-row",0)(2,"c-col",1)(3,"c-breadcrumb")(4,"c-breadcrumb-item",2),o(5," Assets "),t(),i(6,"c-breadcrumb-item",3),o(7," Asset Details "),t()()()(),i(8,"c-row",0)(9,"c-col",1)(10,"c-card")(11,"c-card-header",4)(12,"strong"),o(13," Asset "),d(14,we,2,0,"span",5)(15,Be,1,1),t(),i(16,"c-badge",6),d(17,Ne,2,0,"span",5)(18,Ve,1,1),t()(),i(19,"c-card-body")(20,"c-row")(21,"c-col",7)(22,"p")(23,"strong"),o(24,"Name: "),t(),d(25,Re,2,0,"span",5)(26,$e,1,1),t(),i(27,"p")(28,"strong"),o(29,"Symbol: "),t(),d(30,je,2,0,"span",5)(31,Oe,1,1),t(),i(32,"p")(33,"strong"),o(34,"Asset Type: "),t(),d(35,Ge,2,0,"span",5)(36,He,1,1),t(),i(37,"p")(38,"strong"),o(39,"Supply Type: "),t(),d(40,qe,2,0,"span",5)(41,ze,1,1),t(),i(42,"p")(43,"strong"),o(44,"Supply: "),t(),d(45,Ue,2,0,"span",5)(46,Xe,1,1),t()(),i(47,"c-col",7)(48,"p")(49,"strong"),o(50,"Pricing Model: "),t(),d(51,Je,2,0,"span",5)(52,Ke,1,1),t(),i(53,"p")(54,"strong"),o(55,"Trading Model: "),t(),d(56,Qe,2,0,"span",5)(57,We,1,1),t(),i(58,"p")(59,"strong"),o(60,"Execution Model: "),t(),d(61,Ye,2,0,"span",5)(62,Ze,1,1),t(),i(63,"p")(64,"strong"),o(65,"Market Level: "),t(),d(66,et,2,0,"span",5)(67,tt,1,1),t(),i(68,"p")(69,"strong"),o(70,"State: "),t(),d(71,nt,2,0,"span",5)(72,it,1,1),t()()(),i(73,"c-row")(74,"c-col")(75,"p")(76,"strong"),o(77,"Contract: "),t(),i(78,"code",8),d(79,ot,2,0,"span",5)(80,at,1,1),t()()()()()()()(),i(81,"c-row",9)(82,"c-col",10)(83,"c-card",11)(84,"c-card-body")(85,"p")(86,"strong"),o(87,"Asset lock state:"),t()(),i(88,"p")(89,"strong"),d(90,rt,2,0,"span",5)(91,lt,3,3),t()()()()(),i(92,"c-col",10)(93,"c-card",11)(94,"c-card-body")(95,"p")(96,"strong"),o(97,"Extra Info:"),t()(),i(98,"p",12),d(99,st,2,0,"span",5)(100,mt,1,1),t()()()()(),i(101,"c-row",9)(102,"c-col",1)(103,"c-card")(104,"c-card-header")(105,"strong"),o(106,"Prices"),t()(),i(107,"c-card-body")(108,"table",13)(109,"thead")(110,"tr")(111,"th"),o(112,"Market"),t(),i(113,"th"),o(114,"Currency Code"),t(),i(115,"th"),o(116,"Bid"),t(),i(117,"th"),o(118,"Ask"),t(),i(119,"th"),o(120,"Last Update Time"),t(),s(121,"th"),t()(),i(122,"tbody"),d(123,ct,2,1)(124,ut,2,0),t()()()()()(),i(125,"c-row",9)(126,"c-col",1)(127,"c-card")(128,"c-card-header")(129,"strong"),o(130,"Subscribers"),t()(),i(131,"c-card-body")(132,"table",13)(133,"thead")(134,"tr")(135,"th"),o(136,"#"),t(),i(137,"th"),o(138,"Subscriber"),t(),i(139,"th"),o(140,"Balance"),t()()(),i(141,"tbody"),d(142,ft,2,1)(143,xt,2,0),t()()()()()()(),i(144,"app-price-set-modal",14),S("close",function(){return a.closeModal()})("revalidate",function(){return a.refetchAssetDetails()}),t()),m&2&&(l(14),c(a.isAssetLoading?14:15),l(3),c(a.isAssetLoading?17:18),l(8),c(a.isAssetLoading?25:26),l(5),c(a.isAssetLoading?30:31),l(5),c(a.isAssetLoading?35:36),l(5),c(a.isAssetLoading?40:41),l(5),c(a.isAssetLoading?45:46),l(6),c(a.isAssetLoading?51:52),l(5),c(a.isAssetLoading?56:57),l(5),c(a.isAssetLoading?61:62),l(5),c(a.isAssetLoading?66:67),l(5),c(a.isAssetLoading?71:72),l(8),c(a.isAssetLoading?79:80),l(11),c(a.isAssetLoading?90:91),l(9),c(a.isAssetLoading?99:100),l(9),_("hover",!0)("responsive",!0)("striped",!0),l(15),c(a.isAssetLoading?123:124),l(9),_("hover",!0)("responsive",!0)("striped",!0),l(10),c(a.isSubscribersLoading?142:143),l(2),_("visible",a.isModalOpen)("formData",a.formData))},dependencies:[ee,k,M,A,y,T,U,J,W,Q,K,z,se,re,le,de,G,E,ve],encapsulation:2})}}return e})();export{wt as AssetInnerComponent};
