import{c as J}from"./chunk-KVDUZ2U5.js";import{b as K,c as y,d as O,e as Q,f as X,i as Y,j as Z,n as $,o as ee}from"./chunk-RWLWIXKE.js";import{$ as P,A as k,H as q,I as B,J as V,U as j,V as R,aa as z,ba as A,ca as H,da as U,m as M,n as D,x as G,y as N,ya as W}from"./chunk-DLRE2GSZ.js";import{Fb as _,Jb as S,Lb as m,Pb as i,Qb as o,Rb as d,Vc as I,Yb as L,_b as v,cb as l,hb as x,kc as a,lc as b,mc as E,pa as C,pb as w,pc as T,qa as h,qc as F,vb as c}from"./chunk-SNB637Z6.js";var te=e=>({"is-invalid":e}),ne=()=>({"minWidth.%":44});function ie(e,s){if(e&1&&(i(0,"c-alert",7),C(),d(1,"svg",23),h(),i(2,"span"),a(3),o()()),e&2){let n=v();l(3),b(n.errorMessage)}}function oe(e,s){e&1&&(i(0,"small"),a(1,"Username is required"),o())}function re(e,s){if(e&1&&(i(0,"div",12),c(1,oe,2,0,"small"),o()),e&2){let n,r=v();l(),m(!((n=r.loginForm.get("username"))==null||n.errors==null)&&n.errors.required?1:-1)}}function le(e,s){e&1&&(i(0,"small"),a(1,"Password is required"),o())}function ae(e,s){if(e&1&&(i(0,"small"),a(1),o()),e&2){let n,r=v(2);l(),E("Password must be at least ",(n=r.loginForm.get("password"))==null||n.errors==null||n.errors.minlength==null?null:n.errors.minlength.requiredLength," characters")}}function me(e,s){if(e&1&&(i(0,"div",12),c(1,le,2,0,"small")(2,ae,2,1,"small"),o()),e&2){let n,r,t=v();l(),m(!((n=t.loginForm.get("password"))==null||n.errors==null)&&n.errors.required?1:-1),l(),m(!((r=t.loginForm.get("password"))==null||r.errors==null)&&r.errors.minlength?2:-1)}}function se(e,s){e&1&&(d(0,"c-spinner",24),a(1," Loading... "))}function ce(e,s){e&1&&a(0," Login ")}var Se=(()=>{class e{constructor(n,r,t){this.fb=n,this.authService=r,this.router=t,this.isLoading=!1,this.errorMessage="",this.loginForm=this.fb.group({username:["",y.required],password:["",y.required]})}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{username:n,password:r}=this.loginForm.value;this.authService.login(n,r).then(t=>{if(!t)throw new Error("Login failed");this.router.navigate(["/dashboard"])}).catch(t=>{this.errorMessage="Invalid credentials, please try again",this.isLoading=!1})}static{this.\u0275fac=function(r){return new(r||e)(x($),x(J),x(M))}}static{this.\u0275cmp=w({type:e,selectors:[["app-login"]],decls:43,vars:17,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"ngSubmit","formGroup"],[1,"text-body-secondary"],["color","danger"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","username","id","username","cFormControl","","formControlName","username","placeholder","Username"],[1,"text-danger","mb-2","d-flex","align-items-center","justify-content-end"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["autoComplete","current-password","id","current-password","cFormControl","","formControlName","password","placeholder","Password","type","password"],["xs","6"],["cButton","","color","primary","type","submit",1,"px-4",3,"disabled"],["xs","6",1,"text-right"],["cButton","","color","link","type","button",1,"px-0"],[1,"text-white","bg-primary","py-5",3,"ngStyle"],[1,"text-center"],["cButton","","color","primary","routerLink","/register",1,"mt-3",3,"active"],["cIcon","","name","cilBellExclamation","size","sm"],["size","sm"]],template:function(r,t){if(r&1&&(i(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),L("ngSubmit",function(){return t.onSubmit()}),i(8,"h1"),a(9,"Login"),o(),i(10,"p",6),a(11,"Sign In to your account"),o(),c(12,ie,4,1,"c-alert",7),i(13,"c-input-group",8)(14,"span",9),C(),d(15,"svg",10),o(),h(),d(16,"input",11),o(),c(17,re,2,1,"div",12),i(18,"c-input-group",13)(19,"span",9),C(),d(20,"svg",14),o(),h(),d(21,"input",15),o(),c(22,me,3,2,"div",12),i(23,"c-row")(24,"c-col",16)(25,"button",17),c(26,se,2,0)(27,ce,1,0),o()(),i(28,"c-col",18)(29,"button",19),a(30," Forgot password? "),o()()()()()(),i(31,"c-card",20)(32,"c-card-body",21)(33,"div")(34,"h2"),a(35,"Sign up"),o(),i(36,"p"),a(37," Digital asset management platform that helps your business grow. "),o(),i(38,"p")(39,"strong"),a(40,"Powered by Tarmiz"),o()(),i(41,"a",22),a(42," Register Now! "),o()()()()()()()()()),r&2){let g,p,f,u;l(7),_("formGroup",t.loginForm),l(5),m(t.errorMessage?12:-1),l(4),S(F(12,te,((g=t.loginForm.get("username"))==null?null:g.invalid)&&((g=t.loginForm.get("username"))==null?null:g.touched))),l(),m((p=t.loginForm.get("username"))!=null&&p.invalid&&((p=t.loginForm.get("username"))!=null&&p.dirty||(p=t.loginForm.get("username"))!=null&&p.touched)?17:-1),l(4),S(F(14,te,((f=t.loginForm.get("password"))==null?null:f.invalid)&&((f=t.loginForm.get("password"))==null?null:f.touched))),l(),m((u=t.loginForm.get("password"))!=null&&u.invalid&&((u=t.loginForm.get("password"))!=null&&u.dirty||(u=t.loginForm.get("password"))!=null&&u.touched)?22:-1),l(3),_("disabled",t.loginForm.invalid||t.isLoading),l(),m(t.isLoading?26:27),l(5),_("ngStyle",T(16,ne)),l(10),_("active",!0)}},dependencies:[k,A,U,H,W,V,q,B,j,R,z,G,P,ee,X,K,O,Q,Y,Z,N,I,D],encapsulation:2})}}return e})();export{Se as LoginComponent};
