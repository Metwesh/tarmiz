import{a as y,b as W}from"./chunk-M2H3ZEM6.js";import{a as B,b as R,c as r,d as Y,e as z,g as H,h as U,j,k as X,o as J,q as Q}from"./chunk-XMS53VVL.js";import{$ as K,B as N,Ca as w,I as L,J as q,L as I,a as k,aa as D,ba as V,ca as P,fa as G,ga as O,z as A}from"./chunk-H2UEIIB4.js";import{Cb as c,Eb as f,Ib as u,Mb as i,Nb as o,Ob as s,Vb as x,Xb as C,cb as a,hb as M,hc as m,ic as S,pa as b,pb as T,qa as F,vb as d}from"./chunk-OF6GQXFW.js";function Z(t,p){t&1&&(i(0,"small"),m(1,"Name is required"),o())}function $(t,p){if(t&1&&(i(0,"div",5),d(1,Z,2,0,"small"),o()),t&2){let n,l=C();a(),u(!((n=l.assetForm.get("name"))==null||n.errors==null)&&n.errors.required?1:-1)}}function ee(t,p){t&1&&(i(0,"small"),m(1,"Symbol is required"),o())}function te(t,p){if(t&1&&(i(0,"div",5),d(1,ee,2,0,"small"),o()),t&2){let n,l=C();a(),u(!((n=l.assetForm.get("symbol"))==null||n.errors==null)&&n.errors.required?1:-1)}}function ne(t,p){t&1&&(i(0,"small"),m(1,"Supply is required"),o())}function le(t,p){if(t&1&&(i(0,"div",5),d(1,ne,2,0,"small"),o()),t&2){let n,l=C(2);a(),u(!((n=l.assetForm.get("supply"))==null||n.errors==null)&&n.errors.required?1:-1)}}function oe(t,p){if(t&1&&(i(0,"c-col")(1,"div",2)(2,"label",23),m(3,"Supply"),o(),s(4,"input",24),d(5,le,2,1,"div",5),o()()),t&2){let n,l,e=C();a(4),f("is-invalid",((n=e.assetForm.get("supply"))==null?null:n.invalid)&&((n=e.assetForm.get("supply"))==null?null:n.touched)),a(),u((l=e.assetForm.get("supply"))!=null&&l.invalid&&((l=e.assetForm.get("supply"))!=null&&l.dirty||(l=e.assetForm.get("supply"))!=null&&l.touched)?5:-1)}}function ie(t,p){if(t&1&&(b(),s(0,"svg",26),F(),i(1,"span"),m(2),o()),t&2){let n=C(2);a(2),S(n.successMessage)}}function ae(t,p){if(t&1&&(b(),s(0,"svg",27),F(),i(1,"span"),m(2),o()),t&2){let n=C(2);a(2),S(n.errorMessage)}}function se(t,p){if(t&1&&(i(0,"c-alert",16)(1,"div",25),d(2,ie,3,1)(3,ae,3,1),o()()),t&2){let n=C();c("color",n.successMessage?"success":"danger"),a(2),u(n.successMessage?2:3)}}function re(t,p){t&1&&(s(0,"c-spinner",28),m(1," Loading... "))}function me(t,p){t&1&&m(0," Submit ")}var ge=(()=>{class t{constructor(n,l){this.fb=n,this.http=l,this.submitting=!1,this.successMessage="",this.errorMessage="",this.assetTypeKey=y.ASSET_TYPE,this.pricingModelKey=y.PRICING_MODEL,this.supplyTypesKey=y.SUPPLY_TYPES,this.accountLevelKey=y.ACCOUNT_LEVEL,this.tradingModelKey=y.TRADING_MODEL,this.paymentModelKey=y.PAYMENT_MODEL,this.executionModelKey=y.EXECUTION_MODEL,this.marketKey=y.MARKET,this.assetForm=this.fb.group({name:["",[r.required,r.minLength(3)]],symbol:["",[r.required,r.minLength(3)]],assetType:["",[r.required]],exclusive:[!1,[r.required]],supplyType:["",[r.required]],supply:[""],pricingModel:["",[r.required]],tradingModel:["",[r.required]],executionModel:["",[r.required]],paymentModel:["",[r.required]],cid:[""],marketId:["",[r.required]],level:["",[r.required]]})}ngOnInit(){this.assetForm.get("supplyType")?.valueChanges.subscribe(n=>{let l=this.assetForm.get("supply");n==="1"?l?.setValidators([r.required]):l?.clearValidators(),l?.updateValueAndValidity()})}isInvalid(n){let l=this.assetForm.get(n);return l?l.invalid&&(l.dirty||l.touched):!1}onSubmit(){if(this.submitting=!0,this.assetForm.invalid){this.errorMessage="Please fill all required fields correctly.",this.submitting=!1;return}this.successMessage="",this.errorMessage="",this.http.post("/account/create/asset",this.assetForm.value).subscribe({next:()=>{this.successMessage="Asset created successfully!",this.assetForm.reset(),this.submitting=!1},error:n=>{this.errorMessage=n.error,this.submitting=!1}})}static{this.\u0275fac=function(l){return new(l||t)(M(J),M(k))}}static{this.\u0275cmp=T({type:t,selectors:[["app-asset-create"]],decls:47,vars:27,consts:[["cForm","","autocomplete","off",1,"mb-4",3,"ngSubmit","formGroup"],[1,"row-cols-2"],[1,"mb-3"],["cLabel","","for","name"],["cFormControl","","id","name","type","text","placeholder","Enter asset name","formControlName","name"],[1,"text-danger","small","text-end"],["cLabel","","for","symbol"],["cFormControl","","id","symbol","type","text","placeholder","Enter symbol","formControlName","symbol"],["controlName","assetType","label","Asset Type","placeholder","Choose asset type",3,"key","control"],["controlName","supplyType","label","Supply Type","placeholder","Choose supply type",3,"key","control"],["controlName","pricingModel","label","Pricing Model","placeholder","Choose pricing model",3,"key","control"],["controlName","tradingModel","label","Trading Model","placeholder","Choose trading model",3,"key","control"],["controlName","executionModel","label","Execution Model","placeholder","Choose execution model",3,"key","control"],["controlName","paymentModel","label","Payment Model","placeholder","Choose payment model",3,"key","control"],["controlName","marketId","label","Market","placeholder","Choose market","defaultValue","818",3,"key","control"],["controlName","level","label","Account Level","placeholder","Choose level",3,"key","control"],[3,"color"],[1,"align-items-center"],["sizing","lg","switch",""],["cFormCheckInput","","type","checkbox","formControlName","exclusive"],["cFormCheckLabel",""],[1,"text-end"],["cButton","","color","primary","type","submit",3,"disabled"],["cLabel","","for","supply"],["cFormControl","","id","supply","type","number","placeholder","Enter supply","formControlName","supply"],[1,"d-flex","align-items-center","gap-2"],["cIcon","","name","cilCheckCircle","size","sm"],["cIcon","","name","cilBellExclamation","size","sm"],["size","sm"]],template:function(l,e){if(l&1&&(i(0,"form",0),x("ngSubmit",function(){return e.onSubmit()}),i(1,"c-card")(2,"c-card-header")(3,"strong"),m(4,"Create Asset"),o()(),i(5,"c-card-body")(6,"c-row",1)(7,"c-col")(8,"div",2)(9,"label",3),m(10,"Name"),o(),s(11,"input",4),d(12,$,2,1,"div",5),o()(),i(13,"c-col")(14,"div",2)(15,"label",6),m(16,"Symbol"),o(),s(17,"input",7),d(18,te,2,1,"div",5),o()(),i(19,"c-col"),s(20,"app-async-select",8),o(),i(21,"c-col"),s(22,"app-async-select",9),o(),d(23,oe,6,3,"c-col"),i(24,"c-col"),s(25,"app-async-select",10),o(),i(26,"c-col"),s(27,"app-async-select",11),o(),i(28,"c-col"),s(29,"app-async-select",12),o(),i(30,"c-col"),s(31,"app-async-select",13),o(),i(32,"c-col"),s(33,"app-async-select",14),o(),i(34,"c-col"),s(35,"app-async-select",15),o()(),d(36,se,4,2,"c-alert",16),i(37,"c-row",17)(38,"c-col")(39,"c-form-check",18),s(40,"input",19),i(41,"label",20),m(42,"Exclusive"),o()()(),i(43,"c-col",21)(44,"button",22),d(45,re,2,0)(46,me,1,0),o()()()()()()),l&2){let h,_,v,g,E;c("formGroup",e.assetForm),a(11),f("is-invalid",((h=e.assetForm.get("name"))==null?null:h.invalid)&&((h=e.assetForm.get("name"))==null?null:h.touched)),a(),u((_=e.assetForm.get("name"))!=null&&_.invalid&&((_=e.assetForm.get("name"))!=null&&_.dirty||(_=e.assetForm.get("name"))!=null&&_.touched)?12:-1),a(5),f("is-invalid",((v=e.assetForm.get("symbol"))==null?null:v.invalid)&&((v=e.assetForm.get("symbol"))==null?null:v.touched)),a(),u((g=e.assetForm.get("symbol"))!=null&&g.invalid&&((g=e.assetForm.get("symbol"))!=null&&g.dirty||(g=e.assetForm.get("symbol"))!=null&&g.touched)?18:-1),a(2),c("key",e.assetTypeKey)("control",e.assetForm.controls.assetType),a(2),c("key",e.supplyTypesKey)("control",e.assetForm.controls.supplyType),a(),u(((E=e.assetForm.get("supplyType"))==null?null:E.value)!=="2"?23:-1),a(2),c("key",e.pricingModelKey)("control",e.assetForm.controls.pricingModel),a(2),c("key",e.tradingModelKey)("control",e.assetForm.controls.tradingModel),a(2),c("key",e.executionModelKey)("control",e.assetForm.controls.executionModel),a(2),c("key",e.paymentModelKey)("control",e.assetForm.controls.paymentModel),a(2),c("key",e.marketKey)("control",e.assetForm.controls.marketId),a(2),c("key",e.accountLevelKey)("control",e.assetForm.controls.level),a(),u(e.successMessage||e.errorMessage?36:-1),a(8),c("disabled",e.submitting||e.assetForm.invalid),a(),u(e.submitting?45:46)}},dependencies:[Q,H,R,U,B,Y,z,j,X,G,O,q,L,I,A,D,P,V,K,W,w,N],encapsulation:2})}}return t})();export{ge as AssetCreateComponent};
