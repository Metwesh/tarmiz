import{Ca as O,Da as R,I as k,J as $,L as M,N as A,a as F,fa as V,ga as j,ta as z,ua as H,va as N,z as B}from"./chunk-H2UEIIB4.js";import{Cb as p,Ib as b,Jb as L,Kb as u,Lb as _,Mb as i,Nb as t,Ob as c,Sb as y,Vb as T,Xb as d,_c as D,a as x,b as f,cb as a,hb as v,hc as r,ic as C,jc as h,na as S,oa as g,pb as E,pc as w,rc as I,tc as P,vb as m}from"./chunk-OF6GQXFW.js";var G=()=>[0,1,2,3,4],J=(e,s)=>s.subscriber;function K(e,s){e&1&&(i(0,"tr")(1,"td")(2,"p",7),c(3,"span",8),t()(),i(4,"td")(5,"p",7),c(6,"span",8),t()(),i(7,"td")(8,"p",7),c(9,"span",8),t()(),i(10,"td")(11,"p",7),c(12,"span",8),t()(),i(13,"td")(14,"p",7),c(15,"span",8),t()()())}function Q(e,s){e&1&&u(0,K,16,0,"tr",null,L),e&2&&_(w(0,G))}function U(e,s){e&1&&(i(0,"tr")(1,"td",9),r(2," No pending subscribers "),t()())}function W(e,s){e&1&&(c(0,"c-spinner",13),r(1," Loading... "))}function X(e,s){e&1&&r(0," Approve ")}function Y(e,s){if(e&1){let n=y();i(0,"tr")(1,"td",10),r(2),t(),i(3,"td",10)(4,"code"),r(5),t()(),i(6,"td",10),r(7),I(8,"number"),t(),i(9,"td",10),r(10),t(),i(11,"td")(12,"div",11)(13,"button",12),T("click",function(){let o=S(n).$implicit,q=d(2);return g(q.approveSubscriber({subscriber:o.subscriber.address,assetId:o.assetId}))}),m(14,W,2,0)(15,X,1,0),t()()()()}if(e&2){let n=s.$implicit,l=s.$index,o=d(2);a(2),C(l+1),a(3),C(n.subscriber.address),a(2),h(" ",P(8,6,n.balance,"1.0-2")," "),a(3),h(" ",n.stateName," "),a(3),p("disabled",o.submitting),a(),b(o.submitting?14:15)}}function Z(e,s){if(e&1&&u(0,Y,16,9,"tr",null,J),e&2){let n=d();_(n.subscribers)}}var se=(()=>{class e{constructor(n){this.http=n,this.isLoading=!0,this.subscribers=[],this.submitting=!1}ngOnInit(){this.fetchPendingSubscribers()}fetchPendingSubscribers(){this.http.get("/issuer/asset/subscriptions/pending").subscribe(({subscribers:n})=>{this.subscribers=n,this.isLoading=!1})}approveSubscriber(n){this.submitting=!0,this.http.post("/issuer/asset/subscription/set",f(x({},n),{state:2})).subscribe({next:()=>{this.fetchPendingSubscribers(),this.submitting=!1},error:()=>{this.submitting=!1}})}static{this.\u0275fac=function(l){return new(l||e)(v(F))}}static{this.\u0275cmp=E({type:e,selectors:[["app-subscribers-list"]],decls:27,vars:4,consts:[[1,"mb-4"],[2,"margin","0"],["xs",""],[1,"mb-0"],["cTable","",1,"mb-0","border",3,"hover","responsive","striped"],[1,"text-nowrap","text-truncate"],[1,"bg-body-tertiary"],["cPlaceholderAnimation","glow",2,"margin","0"],["cCol","12","cPlaceholder","",2,"border-radius","1rem","width","100%"],["colspan","4",1,"text-center",2,"padding-top","10rem","padding-bottom","10rem"],[2,"vertical-align","middle"],[1,"d-flex","align-items-center","justify-content-end"],["cButton","","size","sm",3,"click","disabled"],["size","sm"]],template:function(l,o){l&1&&(i(0,"c-row",0)(1,"c-col")(2,"h3",1),r(3,"Subscribers"),t()()(),i(4,"c-row")(5,"c-col",2)(6,"c-card",0)(7,"c-card-header")(8,"h5",3),r(9,"Subscriber List"),t()(),i(10,"c-card-body")(11,"table",4)(12,"thead",5)(13,"tr")(14,"th",6),r(15,"#"),t(),i(16,"th",6),r(17,"Subscriber"),t(),i(18,"th",6),r(19,"Balance"),t(),i(20,"th",6),r(21,"State"),t(),c(22,"th",6),t()(),i(23,"tbody"),m(24,Q,2,1)(25,U,3,0,"tr")(26,Z,2,0),t()()()()()()),l&2&&(a(11),p("hover",!0)("responsive",!0)("striped",!0),a(13),b(o.isLoading?24:!o.isLoading&&o.subscribers.length===0?25:26))},dependencies:[j,V,R,A,k,$,M,B,N,z,H,O,D],encapsulation:2})}}return e})();export{se as SubscribersListComponent};
