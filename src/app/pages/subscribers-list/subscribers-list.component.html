<c-row class="mb-4">
  <c-col>
    <h3 style="margin: 0">Subscribers</h3>
  </c-col>
</c-row>
<c-row>
  <c-col xs>
    <c-card class="mb-4">
      <c-card-header>
        <h5 class="mb-0">Subscriber List</h5>
      </c-card-header>

      <c-card-body>
        <table
          [hover]="true"
          [responsive]="true"
          [striped]="true"
          cTable
          class="mb-0 border"
        >
          <thead class="text-nowrap text-truncate">
            <tr>
              <th class="bg-body-tertiary">#</th>
              <th class="bg-body-tertiary">Subscriber</th>
              <th class="bg-body-tertiary">Balance</th>
              <th class="bg-body-tertiary"></th>
            </tr>
          </thead>
          <tbody>
            @if (isLoading) { @for (placeholder of [0, 1, 2, 3, 4]; track
            placeholder) {
            <tr>
              <td>
                <p cPlaceholderAnimation="glow" style="margin: 0">
                  <span
                    cCol="12"
                    cPlaceholder
                    style="border-radius: 1rem; width: 100%"
                  ></span>
                </p>
              </td>
              <td>
                <p cPlaceholderAnimation="glow" style="margin: 0">
                  <span
                    cCol="12"
                    cPlaceholder
                    style="border-radius: 1rem; width: 100%"
                  ></span>
                </p>
              </td>
              <td>
                <p cPlaceholderAnimation="glow" style="margin: 0">
                  <span
                    cCol="12"
                    cPlaceholder
                    style="border-radius: 1rem; width: 100%"
                  ></span>
                </p>
              </td>
              <td>
                <p cPlaceholderAnimation="glow" style="margin: 0">
                  <span
                    cCol="12"
                    cPlaceholder
                    style="border-radius: 1rem; width: 100%"
                  ></span>
                </p>
              </td>
            </tr>
            } } @else if (!isLoading && subscribers.length === 0 ) {
            <tr>
              <td
                style="padding-top: 10rem; padding-bottom: 10rem"
                colspan="4"
                class="text-center"
              >
                No pending subscribers
              </td>
            </tr>
            } @else { @for (subscriber of subscribers; track
            subscriber.subscriber; let index = $index) {

            <tr>
              <td style="vertical-align: middle">{{ index + 1 }}</td>
              <td style="vertical-align: middle">
                {{ subscriber.subscriber }}
              </td>
              <td style="vertical-align: middle">
                {{ subscriber.balance | number : "1.0-2" }}
              </td>
              <td>
                <div class="d-flex align-items-center justify-content-end">
                  <button
                    cButton
                    [disabled]="submitting"
                    size="sm"
                    (click)="approveSubscriber({
                    subscriber: subscriber.subscriber,
                    assetId: subscriber.assetId,
                  })"
                  >
                    @if (submitting) {
                    <c-spinner size="sm" />
                    Loading... } @else { Approve }
                  </button>
                </div>
              </td>
            </tr>
            } }
          </tbody>
        </table>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
