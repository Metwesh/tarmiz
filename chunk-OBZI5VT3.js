import{a as y,b as W}from"./chunk-EDUC2EC5.js";import{a as B,b as R,c as a,d as z,e as H,g as Y,h as j,j as K,k as X,o as J,q as Q}from"./chunk-XMS53VVL.js";import{$ as I,B as N,Ca as O,I as L,J as q,L as U,a as k,aa as V,ba as D,ca as P,fa as G,ga as w,z as A}from"./chunk-H2UEIIB4.js";import{Cb as d,Eb as f,Ib as u,Mb as o,Nb as i,Ob as s,Vb as x,Xb as C,cb as r,hb as S,hc as m,ic as E,pa as b,pb as T,qa as F,vb as p}from"./chunk-OF6GQXFW.js";function Z(t,c){t&1&&(o(0,"small"),m(1,"Name is required"),i())}function $(t,c){if(t&1&&(o(0,"div",5),p(1,Z,2,0,"small"),i()),t&2){let l,n=C();r(),u(!((l=n.assetForm.get("name"))==null||l.errors==null)&&l.errors.required?1:-1)}}function ee(t,c){t&1&&(o(0,"small"),m(1,"Symbol is required"),i())}function te(t,c){if(t&1&&(o(0,"div",5),p(1,ee,2,0,"small"),i()),t&2){let l,n=C();r(),u(!((l=n.assetForm.get("symbol"))==null||l.errors==null)&&l.errors.required?1:-1)}}function le(t,c){t&1&&(o(0,"small"),m(1,"Supply is required"),i())}function ne(t,c){if(t&1&&(o(0,"div",5),p(1,le,2,0,"small"),i()),t&2){let l,n=C(2);r(),u(!((l=n.assetForm.get("supply"))==null||l.errors==null)&&l.errors.required?1:-1)}}function ie(t,c){if(t&1&&(o(0,"c-col")(1,"div",2)(2,"label",22),m(3,"Supply"),i(),s(4,"input",23),p(5,ne,2,1,"div",5),i()()),t&2){let l,n,e=C();r(4),f("is-invalid",((l=e.assetForm.get("supply"))==null?null:l.invalid)&&((l=e.assetForm.get("supply"))==null?null:l.touched)),r(),u((n=e.assetForm.get("supply"))!=null&&n.invalid&&((n=e.assetForm.get("supply"))!=null&&n.dirty||(n=e.assetForm.get("supply"))!=null&&n.touched)?5:-1)}}function oe(t,c){if(t&1&&(b(),s(0,"svg",25),F(),o(1,"span"),m(2),i()),t&2){let l=C(2);r(2),E(l.successMessage)}}function re(t,c){if(t&1&&(b(),s(0,"svg",26),F(),o(1,"span"),m(2),i()),t&2){let l=C(2);r(2),E(l.errorMessage)}}function se(t,c){if(t&1&&(o(0,"c-alert",15)(1,"div",24),p(2,oe,3,1)(3,re,3,1),i()()),t&2){let l=C();d("color",l.successMessage?"success":"danger"),r(2),u(l.successMessage?2:3)}}function ae(t,c){t&1&&(s(0,"c-spinner",27),m(1," Loading... "))}function me(t,c){t&1&&m(0," Submit ")}var ge=(()=>{class t{constructor(l,n){this.fb=l,this.http=n,this.submitting=!1,this.successMessage="",this.errorMessage="",this.assetTypeUrl=y.ASSET_TYPE,this.pricingModelUrl=y.PRICING_MODEL,this.supplyTypesUrl=y.SUPPLY_TYPES,this.accountLevelUrl=y.ACCOUNT_LEVEL,this.tradingModelUrl=y.TRADING_MODEL,this.executionModelUrl=y.EXECUTION_MODEL,this.marketUrl=y.MARKET,this.assetForm=this.fb.group({name:["",[a.required,a.minLength(3)]],symbol:["",[a.required,a.minLength(3)]],assetType:["",[a.required]],exclusive:[!1,[a.required]],supplyType:["",[a.required]],supply:[""],pricingModel:["",[a.required]],tradingModel:["",[a.required]],executionModel:["",[a.required]],cid:[""],marketId:["",[a.required]],level:["",[a.required]]})}ngOnInit(){this.assetForm.get("supplyType")?.valueChanges.subscribe(l=>{let n=this.assetForm.get("supply");l==="1"?n?.setValidators([a.required]):n?.clearValidators(),n?.updateValueAndValidity()})}isInvalid(l){let n=this.assetForm.get(l);return n?n.invalid&&(n.dirty||n.touched):!1}onSubmit(){if(this.submitting=!0,this.assetForm.invalid){this.errorMessage="Please fill all required fields correctly.",this.submitting=!1;return}this.successMessage="",this.errorMessage="",this.http.post("/account/create/asset",this.assetForm.value).subscribe({next:()=>{this.successMessage="Asset created successfully!",this.assetForm.reset(),this.submitting=!1},error:l=>{this.errorMessage=l.error,this.submitting=!1}})}static{this.\u0275fac=function(n){return new(n||t)(S(J),S(k))}}static{this.\u0275cmp=T({type:t,selectors:[["app-asset-create"]],decls:45,vars:25,consts:[["cForm","","autocomplete","off",1,"mb-4",3,"ngSubmit","formGroup"],[1,"row-cols-2"],[1,"mb-3"],["cLabel","","for","name"],["cFormControl","","id","name","type","text","placeholder","Enter asset name","formControlName","name"],[1,"text-danger","small","text-end"],["cLabel","","for","symbol"],["cFormControl","","id","symbol","type","text","placeholder","Enter symbol","formControlName","symbol"],["controlName","assetType","label","Asset Type","placeholder","Choose asset type",3,"key","control"],["controlName","supplyType","label","Supply Type","placeholder","Choose supply type",3,"key","control"],["controlName","pricingModel","label","Pricing Model","placeholder","Choose pricing model",3,"key","control"],["controlName","tradingModel","label","Trading Model","placeholder","Choose trading model",3,"key","control"],["controlName","executionModel","label","Execution Model","placeholder","Choose execution model",3,"key","control"],["controlName","marketId","label","Market","placeholder","Choose market","defaultValue","818",3,"key","control"],["controlName","level","label","Account Level","placeholder","Choose level",3,"key","control"],[3,"color"],[1,"align-items-center"],["sizing","lg","switch",""],["cFormCheckInput","","type","checkbox","formControlName","exclusive"],["cFormCheckLabel",""],[1,"text-end"],["cButton","","color","primary","type","submit",3,"disabled"],["cLabel","","for","supply"],["cFormControl","","id","supply","type","number","placeholder","Enter supply","formControlName","supply"],[1,"d-flex","align-items-center","gap-2"],["cIcon","","name","cilCheckCircle","size","sm"],["cIcon","","name","cilBellExclamation","size","sm"],["size","sm"]],template:function(n,e){if(n&1&&(o(0,"form",0),x("ngSubmit",function(){return e.onSubmit()}),o(1,"c-card")(2,"c-card-header")(3,"strong"),m(4,"Create Asset"),i()(),o(5,"c-card-body")(6,"c-row",1)(7,"c-col")(8,"div",2)(9,"label",3),m(10,"Name"),i(),s(11,"input",4),p(12,$,2,1,"div",5),i()(),o(13,"c-col")(14,"div",2)(15,"label",6),m(16,"Symbol"),i(),s(17,"input",7),p(18,te,2,1,"div",5),i()(),o(19,"c-col"),s(20,"app-async-select",8),i(),o(21,"c-col"),s(22,"app-async-select",9),i(),p(23,ie,6,3,"c-col"),o(24,"c-col"),s(25,"app-async-select",10),i(),o(26,"c-col"),s(27,"app-async-select",11),i(),o(28,"c-col"),s(29,"app-async-select",12),i(),o(30,"c-col"),s(31,"app-async-select",13),i(),o(32,"c-col"),s(33,"app-async-select",14),i()(),p(34,se,4,2,"c-alert",15),o(35,"c-row",16)(36,"c-col")(37,"c-form-check",17),s(38,"input",18),o(39,"label",19),m(40,"Exclusive"),i()()(),o(41,"c-col",20)(42,"button",21),p(43,ae,2,0)(44,me,1,0),i()()()()()()),n&2){let v,_,h,g,M;d("formGroup",e.assetForm),r(11),f("is-invalid",((v=e.assetForm.get("name"))==null?null:v.invalid)&&((v=e.assetForm.get("name"))==null?null:v.touched)),r(),u((_=e.assetForm.get("name"))!=null&&_.invalid&&((_=e.assetForm.get("name"))!=null&&_.dirty||(_=e.assetForm.get("name"))!=null&&_.touched)?12:-1),r(5),f("is-invalid",((h=e.assetForm.get("symbol"))==null?null:h.invalid)&&((h=e.assetForm.get("symbol"))==null?null:h.touched)),r(),u((g=e.assetForm.get("symbol"))!=null&&g.invalid&&((g=e.assetForm.get("symbol"))!=null&&g.dirty||(g=e.assetForm.get("symbol"))!=null&&g.touched)?18:-1),r(2),d("key",e.assetTypeUrl)("control",e.assetForm.controls.assetType),r(2),d("key",e.supplyTypesUrl)("control",e.assetForm.controls.supplyType),r(),u(((M=e.assetForm.get("supplyType"))==null?null:M.value)!=="2"?23:-1),r(2),d("key",e.pricingModelUrl)("control",e.assetForm.controls.pricingModel),r(2),d("key",e.tradingModelUrl)("control",e.assetForm.controls.tradingModel),r(2),d("key",e.executionModelUrl)("control",e.assetForm.controls.executionModel),r(2),d("key",e.marketUrl)("control",e.assetForm.controls.marketId),r(2),d("key",e.accountLevelUrl)("control",e.assetForm.controls.level),r(),u(e.successMessage||e.errorMessage?34:-1),r(8),d("disabled",e.submitting||e.assetForm.invalid),r(),u(e.submitting?43:44)}},dependencies:[Q,Y,R,j,B,z,H,K,X,G,w,q,L,U,A,V,P,D,I,W,O,N],encapsulation:2})}}return t})();export{ge as AssetCreateComponent};
