import{a as te}from"./chunk-IWLDGLAP.js";import{D as N,Da as ee,E as R,F as H,G as z,I as G,J as O,L as q,N as J,a as P,ea as K,fa as Q,ga as W,k as j,n as M,ta as X,ua as Y,va as Z,x as V,z as $}from"./chunk-H2UEIIB4.js";import{Bb as w,Cb as b,Gb as L,Ib as _,Jb as E,Kb as f,Lb as h,Mb as t,Nb as e,Ob as s,Sb as k,Vb as B,Xb as c,Zc as D,_c as F,cb as o,hb as I,hc as r,ic as m,jc as p,na as y,oa as T,pa as U,pb as A,pc as v,qc as g,rc as x,tc as C,vb as u}from"./chunk-OF6GQXFW.js";var ne=()=>[0,1,2,3,4],ie=n=>["/transactions",n],re=n=>({"text-primary":n}),ae=(n,a)=>a==null?null:a._id,oe=(n,a)=>a.transferId;function se(n,a){n&1&&(t(0,"span",7),s(1,"span",11),e())}function le(n,a){if(n&1&&r(0),n&2){let i=c();p(" ID: ",i.userId," ")}}function de(n,a){n&1&&(t(0,"tr")(1,"td")(2,"p",12),s(3,"span",13),e()(),t(4,"td")(5,"p",12),s(6,"span",13),e()(),t(7,"td")(8,"p",12),s(9,"span",13),e()(),t(10,"td")(11,"p",12),s(12,"span",13),e()(),t(13,"td")(14,"p",12),s(15,"span",13),e()()())}function ce(n,a){n&1&&f(0,de,16,0,"tr",null,E),n&2&&h(v(0,ne))}function me(n,a){n&1&&(t(0,"tr",10)(1,"td",14),r(2," No subscriptions available "),e()())}function pe(n,a){if(n&1){let i=k();t(0,"tr",15),B("click",function(){let d=y(i).$implicit,S=c(2);return T(S.onSubscriberClick(d))}),t(1,"td"),r(2),e(),t(3,"td"),r(4),x(5,"number"),e(),t(6,"td"),r(7),x(8,"number"),e(),t(9,"td"),r(10),e(),t(11,"td",16)(12,"button",17),r(13," View transactions "),e()()()}if(n&2){let i=a.$implicit,l=c(2);w("role",!l.selectedAsset||l.selectedAsset!==i.assetId?"button":void 0),o(2),m(i.asset.symbol),o(2),m(C(5,6,i.balance,"1.2-5")),o(3),m(C(8,9,i.value,"1.2-5")),o(3),m(i.asset.supplyTypeName),o(2),b("disabled",l.selectedAsset===i.assetId)}}function ue(n,a){if(n&1&&f(0,pe,14,12,"tr",null,ae),n&2){let i=c();h(i.subscribers)}}function _e(n,a){n&1&&(t(0,"span",7),s(1,"span",11),e())}function xe(n,a){if(n&1&&r(0),n&2){let i=c(2);p(" ID: ",i.selectedAsset," ")}}function Ce(n,a){n&1&&(t(0,"tr")(1,"td")(2,"p",12),s(3,"span",13),e()(),t(4,"td")(5,"p",12),s(6,"span",13),e()(),t(7,"td")(8,"p",12),s(9,"span",13),e()(),t(10,"td")(11,"p",12),s(12,"span",13),e()(),t(13,"td")(14,"p",12),s(15,"span",13),e()(),t(16,"td")(17,"p",12),s(18,"span",13),e()(),t(19,"td")(20,"p",12),s(21,"span",13),e()(),t(22,"td")(23,"p",12),s(24,"span",13),e()()())}function be(n,a){n&1&&f(0,Ce,25,0,"tr",null,E),n&2&&h(v(0,ne))}function fe(n,a){n&1&&(t(0,"tr")(1,"td",19),r(2," No transactions available "),e()())}function he(n,a){if(n&1&&(t(0,"tr",20)(1,"td"),r(2),x(3,"date"),e(),t(4,"td"),r(5),e(),t(6,"td"),r(7),e(),t(8,"td")(9,"code"),r(10),e()(),t(11,"td"),r(12),e(),t(13,"td"),r(14),x(15,"number"),e(),t(16,"td"),r(17),x(18,"number"),e(),t(19,"td")(20,"div",21),U(),s(21,"svg",22),e()()()),n&2){let i=a.$implicit,l=c(3);b("routerLink",g(19,ie,i.transferId)),o(2),m(C(3,10,i.time*1e3,"short")),o(3),m(i.asset.symbol),o(),L(g(21,re,i.action==="Buy")),o(),p(" ",i.action," "),o(3),p(" ",l.contractAddress===i.from?i.to:i.from," "),o(2),m(i.tokens),o(2),p(" ",C(15,13,i.price,"1.2-5")," "),o(3),p(" ",C(18,16,i.tokens*i.price,"1.2-5")," ")}}function Ie(n,a){if(n&1&&f(0,he,22,23,"tr",20,oe),n&2){let i=c(2);h(i.transactions)}}function Se(n,a){if(n&1&&(t(0,"c-row",4)(1,"c-col",1)(2,"c-card")(3,"c-card-header",5)(4,"strong"),r(5," Asset Transaction Details"),e(),t(6,"c-badge",6),u(7,_e,2,0,"span",7)(8,xe,1,1),e()(),t(9,"c-card-body")(10,"table",8)(11,"thead",18)(12,"tr")(13,"th",9),r(14,"Time"),e(),t(15,"th",9),r(16,"Symbol"),e(),t(17,"th",9),r(18,"Type"),e(),t(19,"th",9),r(20,"Address"),e(),t(21,"th",9),r(22,"Tokens"),e(),t(23,"th",9),r(24," Price "),e(),t(25,"th",9),r(26," Value "),e(),s(27,"th",9),e()(),t(28,"tbody"),u(29,be,2,1)(30,fe,3,0,"tr")(31,Ie,2,0),e()()()()()()),n&2){let i=c();o(7),_(i.transactionsIsLoading?7:8),o(3),b("hover",!0)("responsive",!0)("striped",!0),o(19),_(i.transactionsIsLoading?29:!i.transactionsIsLoading&&i.transactions.length===0?30:31)}}var ke=(()=>{class n{constructor(i,l,d){this.http=i,this.route=l,this.userService=d,this.userId=null,this.contractAddress=null,this.subscribers=[],this.usersIsLoading=!0,this.transactionsIsLoading=!1,this.transactions=[];let S=this.route.snapshot.paramMap.get("id");this.userId=S}ngOnInit(){this.userService.getUser().subscribe(i=>{this.contractAddress=i?.contacts?.find(l=>l.typeName==="Email")?.address||null}),this.http.get(`/issuer/asset/subscriptions/subscriber/${this.userId}`).subscribe({next:({subscribers:i})=>{this.subscribers=i,this.usersIsLoading=!1},error:()=>{this.usersIsLoading=!1}})}getTransactions(){this.http.get(`/issuer/asset/transfers/subscriber/${this.userId}/${this.selectedAsset}`).subscribe({next:({transfers:i})=>{this.transactions=i,this.transactionsIsLoading=!1},error:()=>{this.transactionsIsLoading=!1}})}onSubscriberClick(i){this.selectedAsset!==i.assetId&&(this.transactionsIsLoading=!0,this.selectedAsset=i.assetId,this.getTransactions())}static{this.\u0275fac=function(l){return new(l||n)(I(P),I(j),I(te))}}static{this.\u0275cmp=A({type:n,selectors:[["app-user-inner"]],decls:35,vars:6,consts:[[1,"justify-content-center"],["md","10"],["routerLink","/users/list","color","primary",2,"cursor","pointer"],["active",""],[1,"justify-content-center","mb-4"],[1,"d-flex","justify-content-between","align-items-center"],["color","primary"],["cPlaceholderAnimation","glow"],["cTable","",3,"hover","responsive","striped"],[1,"bg-body-tertiary"],[2,"margin-top","10rem","margin-bottom","10rem"],["cPlaceholder","",2,"width","5rem","border-radius","1rem"],["cPlaceholderAnimation","glow",2,"margin","0"],["cCol","12","cPlaceholder","",2,"border-radius","1rem","width","100%"],["colspan","4",1,"text-center",2,"padding-top","10rem","padding-bottom","10rem"],[3,"click"],[1,"d-flex","items-center","justify-content-end"],["cButton","","size","sm",3,"disabled"],[1,"text-nowrap","text-truncate"],["colspan","8",1,"text-center",2,"padding-top","10rem","padding-bottom","10rem"],[2,"cursor","pointer",3,"routerLink"],[1,"d-flex","align-items-center","justify-content-end","px-2"],["cIcon","","name","cilChevronRight",2,"width","1rem"]],template:function(l,d){l&1&&(t(0,"c-container")(1,"c-row",0)(2,"c-col",1)(3,"c-breadcrumb")(4,"c-breadcrumb-item",2),r(5," Users "),e(),t(6,"c-breadcrumb-item",3),r(7," User Details "),e()()()(),t(8,"c-row",4)(9,"c-col",1)(10,"c-card")(11,"c-card-header",5)(12,"strong"),r(13," User Asset Details"),e(),t(14,"c-badge",6),u(15,se,2,0,"span",7)(16,le,1,1),e()(),t(17,"c-card-body")(18,"table",8)(19,"thead")(20,"tr")(21,"th",9),r(22,"Symbol"),e(),t(23,"th",9),r(24,"Balance"),e(),t(25,"th",9),r(26,"Value"),e(),t(27,"th",9),r(28,"State"),e(),s(29,"th",9),e()(),t(30,"tbody"),u(31,ce,2,1)(32,me,3,0,"tr",10)(33,ue,2,0),e()()()()()(),u(34,Se,32,5,"c-row",4),e()),l&2&&(o(15),_(d.usersIsLoading?15:16),o(3),b("hover",!0)("responsive",!0)("striped",!0),o(13),_(d.usersIsLoading?31:!d.usersIsLoading&&(!d.subscribers||d.subscribers.length===0)?32:33),o(3),_(d.selectedAsset?34:-1))},dependencies:[z,H,R,J,G,O,q,Q,W,N,Z,X,Y,K,M,ee,F,D,V,$],encapsulation:2})}}return n})();export{ke as UserInnerComponent};
