import{d as x,i as Y,l as R,m as U,n as w,q as V}from"./chunk-XMS53VVL.js";import{Z as I,a as P}from"./chunk-H2UEIIB4.js";import{$ as M,Bb as y,Cb as p,Gb as b,Ib as E,Kb as L,Lb as D,Mb as u,Nb as l,Xb as f,cb as s,d as S,ea as A,hb as O,hc as d,ic as T,jc as v,k as o,ma as C,pb as g,qc as N,t as _,vb as m}from"./chunk-OF6GQXFW.js";var n={TRX_TYPE:"transactionType",ASSET_TYPE:"assetType",ASSET_STATE:"assetState",PRICING_MODEL:"pricingModel",SUPPLY_TYPES:"supplyTypes",ACCOUNT_LEVEL:"level",TRADING_MODEL:"tradingModel",MARKET:"market",EXECUTION_MODEL:"executionModel",PAYMENT_MODEL:"paymentModel"},j={[n.TRX_TYPE]:"/general/sysvars/Transaction%20Type",[n.ASSET_TYPE]:"/general/sysvars/Asset%20Type",[n.ASSET_STATE]:"/general/sysvars/Asset%20State",[n.PRICING_MODEL]:"/general/sysvars/Asset%20Pricing%20Model",[n.SUPPLY_TYPES]:"/general/sysvars/Asset%20Supply%20Type",[n.ACCOUNT_LEVEL]:"/general/sysvars/Account%20Level",[n.TRADING_MODEL]:"/general/sysvars/Asset%20Trading%20Model",[n.EXECUTION_MODEL]:"/general/sysvars/Asset%20Execution%20Model",[n.MARKET]:"/general/countries/list",[n.PAYMENT_MODEL]:"/general/sysvars/Asset%20Payment%20Model"};var F=(()=>{class a{constructor(e){this.http=e,this.enumSubjects={[n.TRX_TYPE]:new o({}),[n.ASSET_TYPE]:new o({}),[n.ASSET_STATE]:new o({}),[n.PRICING_MODEL]:new o({}),[n.SUPPLY_TYPES]:new o({}),[n.ACCOUNT_LEVEL]:new o({}),[n.TRADING_MODEL]:new o({}),[n.EXECUTION_MODEL]:new o({}),[n.MARKET]:new o({}),[n.PAYMENT_MODEL]:new o({})},this.cache={},this.enumUrlMapping=j}getEnumData(e,t){let i=this.enumSubjects[e]?.value||{};return t?(Object.entries(i),Object.entries(i).map(([r,h])=>({value:r,label:h}))):i}fetchEnumData(e){return S(this,null,function*(){if(this.cache[e])return Object.entries(this.cache[e]).map(([t,i])=>({id:Number(t),name:i}));try{let t=yield _(this.http.get(this.enumUrlMapping[e])),i=[];return"countries"in t?i=t.countries?.map(r=>({id:r.countryId,name:r.shortName}))||[]:i=t.sysvars?t.sysvars.map(({sysvarId:r,name:h})=>({id:r,name:h})):[],this.cache[e]=this.formatEnumData(i),i}catch(t){return console.error(`Failed to fetch enum data for ${e}:`,t),this.loadFallbackEnums(e),[]}})}formatEnumData(e){return e.reduce((t,{id:i,name:r})=>(t[i]=r,t),{})}loadEnums(e){return S(this,null,function*(){try{for(let t of Object.keys(this.enumSubjects))if(!e||e.includes(t)){let i=yield this.fetchEnumData(t);this.enumSubjects[t].next(this.formatEnumData(i))}}catch(t){console.error("Error loading enums:",t)}})}loadFallbackEnums(e){let t={[n.TRX_TYPE]:{1:"Sell",2:"Buy",3:"P2P"},[n.ASSET_TYPE]:{1:"Precious Metals",2:"Real Estate",3:"Media & Artworks",4:"Carbon Credits"},[n.ASSET_STATE]:{1:"Initialized",2:"Active",3:"Suspended",4:"Deactivated"},[n.PRICING_MODEL]:{1:"Fixed Source",2:"Open Market"},[n.SUPPLY_TYPES]:{1:"Fixed",2:"Dynamic"},[n.ACCOUNT_LEVEL]:{1:"Level 0",2:"Level 1",3:"Level 2",4:"Level 3"},[n.TRADING_MODEL]:{1:"Locked",2:"Open"},[n.EXECUTION_MODEL]:{1:"OnChain",2:"On/Off",3:"Off/On"},[n.MARKET]:{818:"Egypt",682:"Saudi Arabia"},[n.PAYMENT_MODEL]:{1:"OnChain",2:"OffChain"}};t[e]?this.enumSubjects[e].next(t[e]):console.warn(`No fallback data available for ${e}`)}static{this.\u0275fac=function(t){return new(t||a)(A(P))}}static{this.\u0275prov=M({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var X=a=>({"is-invalid":a}),K=(a,c)=>c.value;function $(a,c){if(a&1&&(u(0,"option",5),d(1),l()),a&2){let e=c.$implicit;p("value",e.value),s(),T(e.label)}}function q(a,c){if(a&1&&L(0,$,2,2,"option",5,K),a&2){let e=f();D(e.options)}}function B(a,c){if(a&1&&(u(0,"small"),d(1),l()),a&2){let e=f(2);s(),v("",e.label," is required")}}function z(a,c){if(a&1&&(u(0,"div",4),m(1,B,2,1,"small"),l()),a&2){let e=f();s(),E(e.control.errors!=null&&e.control.errors.required?1:-1)}}var ie=(()=>{class a{constructor(e){this.enumService=e,this.excludeValues=[],this.enabled=!0,this.isLoading=!0,this.options=[]}ngOnInit(){this.enabled&&this.enumService.loadEnums([this.key]).then(()=>this.getOptions())}ngOnChanges(e){e.enabled&&!e.enabled.firstChange&&this.enabled&&this.enumService.loadEnums([this.key]).then(()=>this.getOptions())}getOptions(){if(this.excludeValues?this.options=this.enumService.getEnumData(this.key,!0).filter(t=>!this.excludeValues.includes(t.value)):this.options=this.enumService.getEnumData(this.key,!0),this.isLoading=!1,this.defaultValue===void 0)return;let e=this.options.find(t=>t.value==this.defaultValue);e&&(this.control.setValue(e.value),this.control.markAsDirty(),this.control.markAsTouched())}static{this.\u0275fac=function(t){return new(t||a)(O(F))}}static{this.\u0275cmp=g({type:a,selectors:[["app-async-select"]],inputs:{key:"key",control:"control",controlName:"controlName",label:"label",placeholder:"placeholder",defaultValue:"defaultValue",excludeValues:"excludeValues",enabled:"enabled"},features:[C],decls:8,vars:12,consts:[[1,"mb-3"],["cLabel",""],["cSelect","",3,"id","formControl"],["value","","disabled","",3,"selected"],[1,"text-danger","mb-2","d-flex","align-items-center","justify-content-end"],[3,"value"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"label",1),d(2),l(),u(3,"select",2)(4,"option",3),d(5),l(),m(6,q,2,0),l(),m(7,z,2,1,"div",4),l()),t&2&&(s(),y("for",i.controlName),s(),T(i.label),s(),b(N(10,X,i.control.invalid&&i.control.touched)),p("id",i.controlName)("formControl",i.control),s(),p("selected",!i.control.value),s(),v(" ",i.isLoading?"Loading...":!i.isLoading&&i.options.length===0?"No options available":i.placeholder," "),s(),E(i.options.length>0?6:-1),s(),E(i.control.invalid&&(i.control.dirty||i.control.touched)?7:-1))},dependencies:[V,U,w,R,x,Y,I],styles:["select.ng-pristine[_ngcontent-%COMP%]{color:#a7a8ac}"]})}}return a})();export{n as a,ie as b};
