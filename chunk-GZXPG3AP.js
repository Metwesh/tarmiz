import{a as Fe}from"./chunk-DDXT2S4Z.js";import{a as oe,b as ae}from"./chunk-G5Y4KKYD.js";import{b as ee,c as b,d as te,e as G,g as $,h as ie,j as K,k as ne,o as z,q as U}from"./chunk-XMS53VVL.js";import{A as D,Ca as M,D as Se,Da as Te,E as be,F as he,G as ve,I as B,J as N,L,M as ge,N as Ae,_ as X,a as x,ca as Z,ea as xe,fa as w,ga as V,ha as Ee,k as P,m as fe,n as Ce,oa as H,pa as R,qa as j,ra as O,sa as q,ta as Me,ua as ye,va as Ie,z as E}from"./chunk-H2UEIIB4.js";import{Cb as u,Gb as F,Ib as c,Jb as se,Kb as Y,Lb as J,Mb as i,Nb as t,Ob as d,Sb as pe,Vb as C,Xb as _,Zc as W,_c as _e,a as y,b as re,cb as s,hb as S,hc as a,ic as g,jc as f,na as me,oa as ce,oc as ue,pb as A,pc as Q,qc as k,rc as I,tc as T,vb as m,xa as v}from"./chunk-OF6GQXFW.js";var ke=e=>({"is-invalid":e});function He(e,r){e&1&&(i(0,"div",13),a(1,"Bid price is required"),t())}function Re(e,r){e&1&&(i(0,"div",13),a(1,"Bid price must be greater than 0"),t())}function je(e,r){if(e&1&&m(0,He,2,0,"div",13)(1,Re,2,0,"div",13),e&2){let n=_();c(n.priceSetForm.controls.bid.errors!=null&&n.priceSetForm.controls.bid.errors.required?0:n.priceSetForm.controls.bid.errors!=null&&n.priceSetForm.controls.bid.errors.min?1:-1)}}function Oe(e,r){e&1&&(i(0,"div",13),a(1,"Ask price is required"),t())}function qe(e,r){e&1&&(i(0,"div",13),a(1,"Ask price must be greater than 0"),t())}function Ge(e,r){if(e&1&&m(0,Oe,2,0,"div",13)(1,qe,2,0,"div",13),e&2){let n=_();c(n.priceSetForm.controls.ask.errors!=null&&n.priceSetForm.controls.ask.errors.required?0:n.priceSetForm.controls.ask.errors!=null&&n.priceSetForm.controls.ask.errors.min?1:-1)}}function $e(e,r){e&1&&(d(0,"c-spinner",14),a(1," Loading... "))}function Ke(e,r){e&1&&a(0," Discard Changes")}function ze(e,r){e&1&&(d(0,"c-spinner",14),a(1," Loading... "))}function Ue(e,r){e&1&&a(0," Save Changes ")}var De=(()=>{class e{constructor(n,l){this.formBuilder=n,this.http=l,this.close=new v,this.revalidate=new v,this.submitting=!1,this.priceSetForm=this.formBuilder.group({bid:[0,[b.required,b.min(1e-11)]],ask:[0,[b.required,b.min(1e-11)]]})}onSubmit(){if(this.priceSetForm.invalid)return;this.submitting=!0;let n=y({assetId:this.formData?.assetId??0,marketId:this.formData?.marketId??0,time:Date.now()},this.priceSetForm.value);this.http.post("/issuer/asset/update/price",n).subscribe({next:()=>{this.submitting=!1,this.closeModal(),this.revalidateAssetInner()},error:()=>{this.submitting=!1}})}onReset(){this.submitting=!1,this.priceSetForm.reset(),this.closeModal()}onVisibleChange(n){this.priceSetForm.setValue({bid:this.formData?.bid??0,ask:this.formData?.ask??0}),!n&&this.onReset()}closeModal(){this.close.emit()}revalidateAssetInner(){this.revalidate.emit()}static{this.\u0275fac=function(l){return new(l||e)(S(z),S(x))}}static{this.\u0275cmp=A({type:e,selectors:[["app-price-set-modal"]],inputs:{visible:"visible",formData:"formData"},outputs:{close:"close",revalidate:"revalidate"},decls:39,vars:18,consts:[["alignment","center",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"mb-3"],[1,"fw-bold"],[1,"m-0"],["id","price-set-form",3,"ngSubmit","reset","formGroup"],["xs","12","md","6"],["cLabel","",1,"form-label"],["type","number","formControlName","bid","cFormControl","",1,"form-control"],["type","number","formControlName","ask","cFormControl","",1,"form-control"],["cButton","","form","price-set-form","type","reset","color","secondary",3,"disabled"],["cButton","","form","price-set-form","type","submit","color","primary",3,"disabled"],[1,"text-danger"],["size","sm"]],template:function(l,o){l&1&&(i(0,"c-modal",0),C("visibleChange",function(h){return o.onVisibleChange(h)}),i(1,"c-modal-header")(2,"h5",1),a(3,"Set Price"),t(),i(4,"button",2),C("click",function(){return o.onReset()}),t()(),i(5,"c-modal-body")(6,"c-card",3)(7,"c-card-header",4),a(8,"Market & Asset Details"),t(),i(9,"c-card-body")(10,"p")(11,"strong"),a(12,"Market ID:"),t(),a(13),t(),i(14,"p",5)(15,"strong"),a(16,"Asset ID:"),t(),a(17),t()()(),i(18,"form",6),C("ngSubmit",function(){return o.onSubmit()})("reset",function(){return o.onReset()}),i(19,"c-row")(20,"c-col",7)(21,"div",3)(22,"label",8),a(23,"Bid Price"),t(),d(24,"input",9),m(25,je,2,1),t()(),i(26,"c-col",7)(27,"div",3)(28,"label",8),a(29,"Ask Price"),t(),d(30,"input",10),m(31,Ge,2,1),t()()()()(),i(32,"c-modal-footer")(33,"button",11),m(34,$e,2,0)(35,Ke,1,0),t(),i(36,"button",12),m(37,ze,2,0)(38,Ue,1,0),t()()()),l&2&&(u("visible",o.visible),s(13),f(" ",o.formData==null?null:o.formData.marketName,""),s(4),f(" ",o.formData==null?null:o.formData.assetName,""),s(),u("formGroup",o.priceSetForm),s(6),F(k(14,ke,o.priceSetForm.controls.bid.invalid&&o.priceSetForm.controls.bid.touched)),s(),c(o.priceSetForm.controls.bid.invalid&&o.priceSetForm.controls.bid.touched?25:-1),s(5),F(k(16,ke,o.priceSetForm.controls.ask.invalid&&o.priceSetForm.controls.ask.touched)),s(),c(o.priceSetForm.controls.ask.invalid&&o.priceSetForm.controls.ask.touched?31:-1),s(2),u("disabled",o.submitting),s(),c(o.submitting?34:35),s(2),u("disabled",o.submitting||o.priceSetForm.invalid),s(),c(o.submitting?37:38))},dependencies:[q,j,H,R,O,E,D,U,$,ee,ie,te,G,K,ne,Z,X,w,V,B,L,N,M],encapsulation:2})}}return e})();var Ye=()=>["1"];function Je(e,r){e&1&&(d(0,"c-spinner",8),a(1," Loading... "))}function Qe(e,r){e&1&&a(0," Discard Changes")}function We(e,r){e&1&&(d(0,"c-spinner",8),a(1," Loading... "))}function Xe(e,r){e&1&&a(0," Save Changes ")}var Ne=(()=>{class e{get assetStateDefaultValue(){return`${this.assetState}`}constructor(n,l,o){this.formBuilder=n,this.http=l,this.route=o,this.close=new v,this.revalidate=new v,this.submitting=!1,this.assetStateKey=oe.ASSET_STATE,this.assetStateForm=this.formBuilder.group({state:[0,[b.required,b.min(0)]]})}onSubmit(){let n=this.route.snapshot.paramMap.get("id");if(this.assetStateForm.invalid||!n)return;this.submitting=!0;let l={assetId:+n,state:+(this.assetStateForm.value.state??0)};this.http.post("/issuer/asset/update/state",l).subscribe({next:()=>{this.submitting=!1,this.closeModal(),this.revalidateAssetInner()},error:()=>{this.submitting=!1}})}onReset(){this.submitting=!1,this.assetStateForm.reset(),this.closeModal()}onVisibleChange(n){this.assetStateForm.setValue({state:this.assetState??0}),!n&&this.onReset()}closeModal(){this.close.emit()}revalidateAssetInner(){this.revalidate.emit()}static{this.\u0275fac=function(l){return new(l||e)(S(z),S(x),S(P))}}static{this.\u0275cmp=A({type:e,selectors:[["app-set-asset-state-modal"]],inputs:{visible:"visible",assetState:"assetState"},outputs:{close:"close",revalidate:"revalidate"},decls:16,vars:12,consts:[["alignment","center",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],["id","asset-state-form",3,"ngSubmit","reset","formGroup"],[1,"mb-3"],["controlName","state","label","Asset State","placeholder","Choose asset state",3,"key","control","defaultValue","excludeValues","enabled"],["cButton","","form","asset-state-form","type","reset","color","secondary",3,"disabled"],["cButton","","form","asset-state-form","type","submit","color","primary",3,"disabled"],["size","sm"]],template:function(l,o){l&1&&(i(0,"c-modal",0),C("visibleChange",function(h){return o.onVisibleChange(h)}),i(1,"c-modal-header")(2,"h5",1),a(3,"Set Asset State"),t(),i(4,"button",2),C("click",function(){return o.onReset()}),t()(),i(5,"c-modal-body")(6,"form",3),C("ngSubmit",function(){return o.onSubmit()})("reset",function(){return o.onReset()}),i(7,"div",4),d(8,"app-async-select",5),t()()(),i(9,"c-modal-footer")(10,"button",6),m(11,Je,2,0)(12,Qe,1,0),t(),i(13,"button",7),m(14,We,2,0)(15,Xe,1,0),t()()()),l&2&&(u("visible",o.visible),s(6),u("formGroup",o.assetStateForm),s(2),u("key",o.assetStateKey)("control",o.assetStateForm.controls.state)("defaultValue",o.assetStateDefaultValue)("excludeValues",Q(11,Ye))("enabled",o.visible),s(2),u("disabled",o.submitting),s(),c(o.submitting?11:12),s(2),u("disabled",o.submitting||o.assetStateForm.invalid),s(),c(o.submitting?14:15))},dependencies:[q,j,H,R,O,E,D,U,$,G,K,M,ae],encapsulation:2})}}return e})();var Le=e=>({"is-invalid":e});function et(e,r){if(e&1&&(i(0,"p",5)(1,"strong"),a(2,"Asset Name:"),t(),a(3),t()),e&2){let n=_();s(3),f(" ",n.assetName,"")}}function tt(e,r){e&1&&(i(0,"div",15),a(1,"Bid price is required"),t())}function it(e,r){e&1&&(i(0,"div",15),a(1,"Bid price must be greater than 0"),t())}function nt(e,r){if(e&1&&m(0,tt,2,0,"div",15)(1,it,2,0,"div",15),e&2){let n=_();c(n.priceAddForm.controls.bid.errors!=null&&n.priceAddForm.controls.bid.errors.required?0:n.priceAddForm.controls.bid.errors!=null&&n.priceAddForm.controls.bid.errors.min?1:-1)}}function ot(e,r){e&1&&(i(0,"div",15),a(1,"Ask price is required"),t())}function at(e,r){e&1&&(i(0,"div",15),a(1,"Ask price must be greater than 0"),t())}function rt(e,r){if(e&1&&m(0,ot,2,0,"div",15)(1,at,2,0,"div",15),e&2){let n=_();c(n.priceAddForm.controls.ask.errors!=null&&n.priceAddForm.controls.ask.errors.required?0:n.priceAddForm.controls.ask.errors!=null&&n.priceAddForm.controls.ask.errors.min?1:-1)}}function st(e,r){e&1&&(d(0,"c-spinner",16),a(1," Loading... "))}function lt(e,r){e&1&&a(0," Discard Changes")}function dt(e,r){e&1&&(d(0,"c-spinner",16),a(1," Loading... "))}function mt(e,r){e&1&&a(0," Save Changes ")}var we=(()=>{class e{constructor(n,l,o){this.formBuilder=n,this.http=l,this.route=o,this.close=new v,this.revalidate=new v,this.assetId=null,this.submitting=!1,this.marketKey=oe.MARKET;let p=this.route.snapshot.paramMap.get("id");p&&(this.assetId=p),this.priceAddForm=this.formBuilder.group({marketId:["",[b.required,b.min(0)]],bid:[0,[b.required,b.min(1e-11)]],ask:[0,[b.required,b.min(1e-11)]]})}onSubmit(){if(this.priceAddForm.invalid)return;this.submitting=!0;let n=y({time:Date.now(),assetId:this.assetId},this.priceAddForm.value);this.http.post("/issuer/asset/update/price",n).subscribe({next:()=>{this.submitting=!1,this.closeModal(),this.revalidateAssetInner()},error:()=>{this.submitting=!1}})}onReset(){this.submitting=!1,this.priceAddForm.reset(),this.closeModal()}onVisibleChange(n){n||this.onReset()}closeModal(){this.close.emit()}revalidateAssetInner(){this.revalidate.emit()}static{this.\u0275fac=function(l){return new(l||e)(S(z),S(x),S(P))}}static{this.\u0275cmp=A({type:e,selectors:[["app-price-add-modal"]],inputs:{visible:"visible",assetName:"assetName"},outputs:{close:"close",revalidate:"revalidate"},decls:40,vars:20,consts:[["alignment","center",3,"visibleChange","visible"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"mb-3"],[1,"fw-bold"],[1,"m-0"],["id","price-add-form",3,"ngSubmit","reset","formGroup"],["md","12"],["controlName","marketId","label","Market ID","placeholder","Choose market","defaultValue","818",3,"key","control"],["xs","12","md","6"],["cLabel","",1,"form-label"],["type","number","formControlName","bid","cFormControl","","placeholder","Enter Bid Price",1,"form-control"],["type","number","formControlName","ask","cFormControl","","placeholder","Enter Ask Price",1,"form-control"],["cButton","","form","price-add-form","type","reset","color","secondary",3,"disabled"],["cButton","","form","price-add-form","type","submit","color","primary",3,"disabled"],[1,"text-danger"],["size","sm"]],template:function(l,o){l&1&&(i(0,"c-modal",0),C("visibleChange",function(h){return o.onVisibleChange(h)}),i(1,"c-modal-header")(2,"h5",1),a(3,"Add Price"),t(),i(4,"button",2),C("click",function(){return o.onReset()}),t()(),i(5,"c-modal-body")(6,"c-card",3)(7,"c-card-header",4),a(8,"Asset Details"),t(),i(9,"c-card-body")(10,"p",5)(11,"strong"),a(12,"Asset ID:"),t(),a(13),t(),m(14,et,4,1,"p",5),t()(),i(15,"form",6),C("ngSubmit",function(){return o.onSubmit()})("reset",function(){return o.onReset()}),i(16,"c-row")(17,"c-col",7)(18,"div",3),d(19,"app-async-select",8),t()()(),i(20,"c-row")(21,"c-col",9)(22,"div",3)(23,"label",10),a(24,"Bid Price"),t(),d(25,"input",11),m(26,nt,2,1),t()(),i(27,"c-col",9)(28,"div",3)(29,"label",10),a(30,"Ask Price"),t(),d(31,"input",12),m(32,rt,2,1),t()()()()(),i(33,"c-modal-footer")(34,"button",13),m(35,st,2,0)(36,lt,1,0),t(),i(37,"button",14),m(38,dt,2,0)(39,mt,1,0),t()()()),l&2&&(u("visible",o.visible),s(13),f(" ",o.assetId,""),s(),c(o.assetName?14:-1),s(),u("formGroup",o.priceAddForm),s(4),u("key",o.marketKey)("control",o.priceAddForm.controls.marketId),s(6),F(k(16,Le,o.priceAddForm.controls.bid.invalid&&o.priceAddForm.controls.bid.touched)),s(),c(o.priceAddForm.controls.bid.invalid&&o.priceAddForm.controls.bid.touched?26:-1),s(5),F(k(18,Le,o.priceAddForm.controls.ask.invalid&&o.priceAddForm.controls.ask.touched)),s(),c(o.priceAddForm.controls.ask.invalid&&o.priceAddForm.controls.ask.touched?32:-1),s(2),u("disabled",o.submitting),s(),c(o.submitting?35:36),s(2),u("disabled",o.submitting||o.priceAddForm.invalid),s(),c(o.submitting?38:39))},dependencies:[q,j,H,R,O,E,D,U,$,ee,ie,te,G,K,ne,Z,X,w,V,M,ae,Ae,B,N,L],encapsulation:2})}}return e})();var Ve=()=>[0,1,2,3,4],ct=(e,r)=>r.time,pt=(e,r)=>r.subscriber;function ut(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function _t(e,r){if(e&1&&a(0),e&2){let n=_();f(" ID: ",n.asset==null?null:n.asset.assetId," ")}}function ft(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Ct(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.name," ")}}function St(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function bt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.symbol," ")}}function ht(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function vt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.assetTypeName," ")}}function gt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function At(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.supplyTypeName," ")}}function xt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Et(e,r){if(e&1&&(a(0),I(1,"number")),e&2){let n=_();f(" ",T(1,1,n.asset==null?null:n.asset.supply,"1.0")," ")}}function Mt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function yt(e,r){if(e&1&&(a(0),I(1,"number")),e&2){let n=_();f(" ",T(1,1,n.asset==null?null:n.asset.circulating,"1.0")," ")}}function It(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Tt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.pricingModelName," ")}}function Ft(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function kt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.tradingModelName," ")}}function Pt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Dt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.executionModelName," ")}}function Bt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Nt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.levelName," ")}}function Lt(e,r){e&1&&(i(0,"span",6),d(1,"span",30),t())}function wt(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.contract," ")}}function Vt(e,r){e&1&&(i(0,"span",6),d(1,"span",29),t())}function Ht(e,r){if(e&1&&a(0),e&2){let n=_();f(" ",n.asset==null?null:n.asset.stateName," ")}}function Rt(e,r){e&1&&(i(0,"tr")(1,"td")(2,"p",31),d(3,"span",32),t()(),i(4,"td")(5,"p",31),d(6,"span",32),t()(),i(7,"td")(8,"p",31),d(9,"span",32),t()(),i(10,"td")(11,"p",31),d(12,"span",32),t()(),i(13,"td")(14,"p",31),d(15,"span",32),t()(),i(16,"td")(17,"p",31),d(18,"span",32),t()()())}function jt(e,r){e&1&&Y(0,Rt,19,0,"tr",null,se),e&2&&J(Q(0,Ve))}function Ot(e,r){e&1&&(i(0,"tr",19)(1,"td",33),a(2," No prices available "),t()())}function qt(e,r){if(e&1){let n=pe();i(0,"tr")(1,"td"),a(2),t(),i(3,"td"),a(4),t(),i(5,"td"),a(6),I(7,"number"),t(),i(8,"td"),a(9),I(10,"number"),t(),i(11,"td"),a(12),I(13,"date"),t(),i(14,"td")(15,"div",34)(16,"button",16),C("click",function(){let o=me(n).$implicit,p=_(2);return ce(p.togglePriceSetModal(o))}),a(17," Set Price "),t()()()()}if(e&2){let n=r.$implicit;s(2),g(n.marketNameFull),s(2),g(n.currencyCode),s(2),g(T(7,5,n.bid,"1.2-5")),s(3),g(T(10,8,n.ask,"1.2-5")),s(3),f(" ",T(13,11,n.time*1e3,"short")," ")}}function Gt(e,r){if(e&1&&Y(0,qt,18,14,"tr",null,ct),e&2){let n=_();J(n.asset==null?null:n.asset.markets)}}function $t(e,r){e&1&&(i(0,"div",22),d(1,"c-spinner"),t())}function Kt(e,r){if(e&1&&d(0,"c-chart",23),e&2){let n=_();u("type",n.priceHistory.length===1?"bar":"line")("data",n.chartBarData)("options",n.options)("height",300)}}function zt(e,r){e&1&&(i(0,"tr")(1,"td")(2,"p",31),d(3,"span",32),t()(),i(4,"td")(5,"p",31),d(6,"span",32),t()(),i(7,"td")(8,"p",31),d(9,"span",32),t()()())}function Ut(e,r){e&1&&Y(0,zt,10,0,"tr",null,se),e&2&&J(Q(0,Ve))}function Yt(e,r){e&1&&(i(0,"tr",19)(1,"td",35),a(2," No subscribers available "),t()())}function Jt(e,r){if(e&1&&(i(0,"tr")(1,"td"),a(2),t(),i(3,"td")(4,"code"),a(5),t()(),i(6,"td"),a(7),I(8,"number"),t(),i(9,"td"),a(10),t()()),e&2){let n=r.$implicit,l=r.$index;s(2),g(l+1),s(3),g(n.subscriber.address),s(2),g(T(8,4,n.balance,"1.0")),s(3),g(n.stateName)}}function Qt(e,r){if(e&1&&Y(0,Jt,11,7,"tr",null,pt),e&2){let n=_();J(n.subscribers)}}var Di=(()=>{class e{constructor(n,l,o,p){this.http=n,this.router=l,this.route=o,this.datePipe=p,this.asset=null,this.isAssetLoading=!0,this.subscribers=[],this.isSubscribersLoading=!0,this.isPriceSetModalOpen=!1,this.isAssetStateModalOpen=!1,this.isPriceAddModalOpen=!1,this.isLoadingPriceHistory=!0,this.priceHistory=[],this.options={maintainAspectRatio:!1},this.chartBarData={labels:[],datasets:[]}}ngOnInit(){this.fetchAssetDetails()}fetchAssetDetails(){this.isAssetLoading=!0,this.isSubscribersLoading=!0;let n=this.route.snapshot.paramMap.get("id");if(!n){this.isAssetLoading=!1,this.router.navigate(["/404"]);return}this.http.get(`/issuer/asset/info/${n}`).subscribe({next:l=>{this.asset=l,this.isAssetLoading=!1,this.http.get(`/asset/price/history/${n}/818`).subscribe({next:p=>{this.priceHistory=p.prices.map(h=>({time:this.datePipe.transform(h.time*1e3)??"",bid:h.bid,ask:h.ask})).reverse(),this.isLoadingPriceHistory=!1,this.updatePriceHistoryChart()},error:p=>{console.error("Failed to fetch price history:",p),this.isLoadingPriceHistory=!1}}),this.http.get(`/issuer/asset/subscriptions/asset/${l.assetId}`).subscribe({next:({subscribers:p})=>{this.subscribers=p,this.isSubscribersLoading=!1},error:p=>{console.error("There was an error!",p),this.isSubscribersLoading=!1}})},error:l=>{console.error("There was an error!",l),this.isAssetLoading=!1,this.router.navigate(["/404"])}})}togglePriceSetModal(n){let l=this.route.snapshot.paramMap.get("id");this.priceSetFormData={assetId:+l,assetName:this.asset?.name??"",marketId:n.marketId,marketName:n.marketNameFull,ask:n.ask,bid:n.bid},this.openPriceSetModal()}openPriceSetModal(){this.isPriceSetModalOpen=!0}closePriceSetModal(){this.isPriceSetModalOpen=!1}toggleAssetStateModal(n){n!==void 0&&(this.assetState=n,this.openAssetStateModal())}openPriceAddModal(){this.isPriceAddModalOpen=!0}closePriceAddModal(){this.isPriceAddModalOpen=!1}openAssetStateModal(){this.isAssetStateModalOpen=!0}closeAssetStateModal(){this.isAssetStateModalOpen=!1}refetchAssetDetails(){this.fetchAssetDetails()}updatePriceHistoryChart(){let n=this.priceHistory.length===1?{backgroundColor:"#08D0DD"}:{borderColor:"#08D0DD",backgroundColor:"rgba(8, 208, 221, 0.2)"},l=this.priceHistory.length===1?{backgroundColor:"#FF5733"}:{borderColor:"#FF5733",backgroundColor:"rgba(255, 87, 51, 0.2)"};this.chartBarData={labels:this.priceHistory.map(o=>this.datePipe.transform(o.time)),datasets:[re(y({},n),{label:"Bid Price",data:this.priceHistory.map(o=>o.bid),fill:!0}),re(y({},l),{label:"Ask Price",data:this.priceHistory.map(o=>o.ask),fill:!0})]}}static{this.\u0275fac=function(l){return new(l||e)(S(x),S(fe),S(P),S(W))}}static{this.\u0275cmp=A({type:e,selectors:[["app-asset-inner"]],features:[ue([W])],decls:184,vars:32,consts:[[1,"justify-content-center"],["md","8"],["routerLink","/assets/list","color","primary",2,"cursor","pointer"],["active",""],[1,"d-flex","justify-content-between","align-items-center"],["color","primary"],["cPlaceholderAnimation","glow"],[1,"mb-3"],[3,"gutter"],["lg","3","xs","6"],["lg","9","xs","6"],[1,"text-success"],[1,"mt-4","justify-content-center"],["md","12"],[1,"h-100"],[1,"d-flex","align-items-center","justify-content-between"],["cButton","","color","primary","size","sm",3,"click"],[1,"text-center"],["cTable","",3,"hover","responsive","striped"],[2,"margin-top","10rem","margin-bottom","10rem"],[1,"mb-4"],[1,"d-flex","align-items-center","flex-wrap","gap-2"],[1,"d-flex","justify-content-center","align-items-center",2,"height","18.75rem"],[3,"type","data","options","height"],[1,"my-4","justify-content-center"],[1,"bg-body-tertiary"],[3,"close","revalidate","visible","formData"],[3,"close","revalidate","visible","assetState"],[3,"revalidate","close","visible","assetName"],["cPlaceholder","",2,"width","5rem","border-radius","1rem"],["cPlaceholder","",2,"width","20rem","border-radius","1rem"],["cPlaceholderAnimation","glow",2,"margin","0"],["cCol","12","cPlaceholder","",2,"border-radius","1rem","width","100%"],["colspan","6",1,"text-center",2,"padding-top","10rem","padding-bottom","10rem"],[1,"d-flex","justify-content-end"],["colspan","4",1,"text-center",2,"padding-top","10rem","padding-bottom","10rem"]],template:function(l,o){l&1&&(i(0,"c-container")(1,"c-row",0)(2,"c-col",1)(3,"c-breadcrumb")(4,"c-breadcrumb-item",2),a(5," Assets "),t(),i(6,"c-breadcrumb-item",3),a(7," Asset Details "),t()()()(),i(8,"c-row",0)(9,"c-col",1)(10,"c-card")(11,"c-card-header",4)(12,"strong"),a(13,"Asset Details"),t(),i(14,"c-badge",5),m(15,ut,2,0,"span",6)(16,_t,1,1),t()(),i(17,"c-card-body")(18,"c-card",7)(19,"c-card-header")(20,"strong"),a(21,"General Info"),t()(),i(22,"c-card-body")(23,"c-row",8)(24,"c-col",9)(25,"strong"),a(26,"Name:"),t()(),i(27,"c-col",9),m(28,ft,2,0,"span",6)(29,Ct,1,1),t(),i(30,"c-col",9)(31,"strong"),a(32,"Symbol:"),t()(),i(33,"c-col",9),m(34,St,2,0,"span",6)(35,bt,1,1),t(),i(36,"c-col",9)(37,"strong"),a(38,"Asset Type:"),t()(),i(39,"c-col",9),m(40,ht,2,0,"span",6)(41,vt,1,1),t(),i(42,"c-col",9)(43,"strong"),a(44,"Supply Type:"),t()(),i(45,"c-col",9),m(46,gt,2,0,"span",6)(47,At,1,1),t()()()(),i(48,"c-card",7)(49,"c-card-header")(50,"strong"),a(51,"Supply Info"),t()(),i(52,"c-card-body")(53,"c-row",8)(54,"c-col",9)(55,"strong"),a(56,"Supply:"),t()(),i(57,"c-col",9),m(58,xt,2,0,"span",6)(59,Et,2,4),t(),i(60,"c-col",9)(61,"strong"),a(62,"Circulating:"),t()(),i(63,"c-col",9),m(64,Mt,2,0,"span",6)(65,yt,2,4),t()()()(),i(66,"c-card",7)(67,"c-card-header")(68,"strong"),a(69,"Models"),t()(),i(70,"c-card-body")(71,"c-row",8)(72,"c-col",9)(73,"strong"),a(74,"Pricing Model:"),t()(),i(75,"c-col",9),m(76,It,2,0,"span",6)(77,Tt,1,1),t(),i(78,"c-col",9)(79,"strong"),a(80,"Trading Model:"),t()(),i(81,"c-col",9),m(82,Ft,2,0,"span",6)(83,kt,1,1),t(),i(84,"c-col",9)(85,"strong"),a(86,"Execution Model:"),t()(),i(87,"c-col",9),m(88,Pt,2,0,"span",6)(89,Dt,1,1),t(),i(90,"c-col",9)(91,"strong"),a(92,"User Level:"),t()(),i(93,"c-col",9),m(94,Bt,2,0,"span",6)(95,Nt,1,1),t()()()(),i(96,"c-card")(97,"c-card-header")(98,"strong"),a(99,"Contract Info"),t()(),i(100,"c-card-body")(101,"c-row",8)(102,"c-col",9)(103,"strong"),a(104,"Contract:"),t()(),i(105,"c-col",10)(106,"code",11),m(107,Lt,2,0,"span",6)(108,wt,1,1),t()()()()(),i(109,"c-row",12)(110,"c-col",13)(111,"c-card",14)(112,"c-card-header",15)(113,"strong"),a(114,"Asset State"),t(),i(115,"c-card-header-actions")(116,"button",16),C("click",function(){return o.toggleAssetStateModal(o.asset==null?null:o.asset.stateId)}),a(117," Set State "),t()()(),i(118,"c-card-body")(119,"p",17),m(120,Vt,2,0,"span",6)(121,Ht,1,1),t()()()()()()()()(),i(122,"c-row",12)(123,"c-col",1)(124,"c-card")(125,"c-card-header",15)(126,"strong"),a(127,"Prices"),t(),i(128,"c-card-header-actions")(129,"button",16),C("click",function(){return o.openPriceAddModal()}),a(130," Add Price "),t()()(),i(131,"c-card-body")(132,"table",18)(133,"thead")(134,"tr")(135,"th"),a(136,"Market"),t(),i(137,"th"),a(138,"Currency"),t(),i(139,"th"),a(140,"Bid"),t(),i(141,"th"),a(142,"Ask"),t(),i(143,"th"),a(144,"Last Update Time"),t(),d(145,"th"),t()(),i(146,"tbody"),m(147,jt,2,1)(148,Ot,3,0,"tr",19)(149,Gt,2,0),t()()()()()(),i(150,"c-row",12)(151,"c-col",1)(152,"c-card",20)(153,"c-card-header",21)(154,"span"),a(155,"Price History"),t()(),i(156,"c-card-body"),m(157,$t,2,0,"div",22)(158,Kt,1,4,"c-chart",23),t()()()(),i(159,"c-row",24)(160,"c-col",1)(161,"c-card")(162,"c-card-header")(163,"strong"),a(164,"Subscribers"),t()(),i(165,"c-card-body")(166,"table",18)(167,"thead")(168,"tr")(169,"th",25),a(170,"#"),t(),i(171,"th",25),a(172,"Subscriber"),t(),i(173,"th",25),a(174,"Balance"),t(),i(175,"th",25),a(176,"State"),t()()(),i(177,"tbody"),m(178,Ut,2,1)(179,Yt,3,0,"tr",19)(180,Qt,2,0),t()()()()()()(),i(181,"app-price-set-modal",26),C("close",function(){return o.closePriceSetModal()})("revalidate",function(){return o.refetchAssetDetails()}),t(),i(182,"app-set-asset-state-modal",27),C("close",function(){return o.closeAssetStateModal()})("revalidate",function(){return o.refetchAssetDetails()}),t(),i(183,"app-price-add-modal",28),C("revalidate",function(){return o.refetchAssetDetails()})("close",function(){return o.closePriceAddModal()}),t()),l&2&&(s(15),c(o.isAssetLoading?15:16),s(8),u("gutter",4),s(5),c(o.isAssetLoading?28:29),s(6),c(o.isAssetLoading?34:35),s(6),c(o.isAssetLoading?40:41),s(6),c(o.isAssetLoading?46:47),s(7),u("gutter",4),s(5),c(o.isAssetLoading?58:59),s(6),c(o.isAssetLoading?64:65),s(7),u("gutter",4),s(5),c(o.isAssetLoading?76:77),s(6),c(o.isAssetLoading?82:83),s(6),c(o.isAssetLoading?88:89),s(6),c(o.isAssetLoading?94:95),s(7),u("gutter",4),s(6),c(o.isAssetLoading?107:108),s(13),c(o.isAssetLoading?120:121),s(12),u("hover",!0)("responsive",!0)("striped",!0),s(15),c(o.isAssetLoading?147:!o.isAssetLoading&&(!(o.asset!=null&&o.asset.markets)||(o.asset==null||o.asset.markets==null?null:o.asset.markets.length)===0)?148:149),s(10),c(o.isLoadingPriceHistory?157:158),s(9),u("hover",!0)("responsive",!0)("striped",!0),s(12),c(o.isSubscribersLoading?178:!o.isSubscribersLoading&&o.subscribers.length===0?179:180),s(3),u("visible",o.isPriceSetModalOpen)("formData",o.priceSetFormData),s(),u("visible",o.isAssetStateModalOpen)("assetState",o.assetState),s(),u("visible",o.isPriceAddModalOpen)("assetName",o.asset==null?null:o.asset.name))},dependencies:[xe,V,w,B,L,N,ge,Se,ve,he,be,Ce,Ie,Me,ye,Te,W,E,De,Ne,_e,Fe,M,Ee,we],encapsulation:2})}}return e})();export{Di as AssetInnerComponent};
